{
   "name": "casasystem:casa-collin",
   "displayName": "Casa Collin System",
   "props": {},
   "users": [ 
      {
         "name": "user:richard",
         "displayName": "Richard",
         "props": {}
      },
      {
         "name": "user:natalie",
         "displayName": "Natalie",
         "props": {}
      },
      {
         "name": "usergroup:admins",
         "displayName": "Administrators",
         "users": [
           "user:richard"
         ],
         "props": {
            "pushoverDestAddr": "gX5JLc28t775dYr1yjuo4p38t7hziV"
         }
      },
      {
         "name": "usergroup:key-holders",
         "displayName": "Key Holders",
         "users": [
           "user:richard",
           "user:natalie"
         ],
         "props": {
            "pushoverDestAddr": "g7KTUJvsJbPUNH5SL8oEitXBBuL32j"
         }
      }
   ],
   "areas": [ 
      {
         "name": "casaarea:internet",
         "displayName": "Casa Collin Internet",
         "casas": [
            {
               "name": "casa:internet",
               "displayName": "Internet Casa",
               "address": {
                  "hostname": "casa.elasticbeanstalk.com",
                  "port": 80
               },
               "props": {},
               "states": [],
               "activators": [
                  {
                     "name": "oractivator:home-casas",
                     "sources": [
                        "casa:alarm",
                        "casa:cctv",
                        "casa:light"
                     ]
                  },
                  {
                     "name": "activator:debounced-home-internet-connection",
                     "source": "oractivator:home-casas",
                     "inputDebounceTime": 20,
                     "invert": true
                  },
                  {
                     "name": "activator:debounced-casa-alarm",
                     "source": "casa:alarm",
                     "inputDebounceTime": 20
                  },
                  {
                     "name": "andactivator:home-internet-connection-armed",
                     "sources": [
                        "activator:debounced-home-internet-connection",
                        "gpiostate:alarm-fully-armed"
                     ]
                  }
               ],
               "actions": [
                  {
                  "name": "setstateaction:test-part-arm",
                  "source": "gpiostate:alarm-part-armed",
                  "target": "teststate:alarm-part-armed"
                  },
                  {
                     "name": "pushoveraction:alarm-tamper-alarm",
                     "activeMessage": "Alarm being tampered with!",
                     "activeMessagePriority": 2,
                     "inactiveMessage": "Alarm no longer in tamper mode",
                     "inactiveMessagePriority": 0,
                     "source": "gpiostate:alarm-tamper-alarm",
                     "target": "usergroup:key-holders"
                  },
                  {
                     "name": "pushoveraction:alarm-mains-failure",
                     "activeMessage": "Alarm has lost mains power!",
                     "activeMessagePriority": 2,
                     "inactiveMessage": "Alarm mains power restored",
                     "inactiveMessagePriority": 0,
                     "source": "gpiostate:alarm-mains-failure",
                     "target": "usergroup:key-holders"
                  },
                  {
                     "name": "pushoveraction:alarm-fire-alarm",
                     "activeMessage": "Fire Alarm!",
                     "activeMessagePriority": 2,
                     "inactiveMessage": "Fire alarm reset",
                     "inactiveMessagePriority": 0,
                     "source": "gpiostate:alarm-fire-alarm",
                     "target": "usergroup:key-holders"
                  },
                  {
                     "name": "pushoveraction:alarm-fully-armed",
                     "activeMessage": "Alarm armed",
                     "activeMessagePriority": 0,
                     "inactiveMessage": "Alarm disarmed",
                     "inactiveMessagePriority": 0,
                     "source": "gpiostate:alarm-fully-armed",
                     "target": "usergroup:admins"
                  },
                  {
                     "name": "pushoveraction:alarm-part-armed",
                     "activeMessage": "Alarm part armed",
                     "activeMessagePriority": 0,
                     "inactiveMessage": "Alarm disarmed",
                     "inactiveMessagePriority": 0,
                     "source": "gpiostate:alarm-part-armed",
                     "target": "usergroup:admins"
                  },
                  {
                     "name": "pushoveraction:alarm-in-alarm",
                     "activeMessage": "Alarm triggered",
                     "activeMessagePriority": 2,
                     "inactiveMessage": "Alarm trigger reset",
                     "inactiveMessagePriority": 2,
                     "source": "gpiostate:alarm-in-alarm",
                     "target": "usergroup:key-holders"
                  },
                  {
                     "name": "pushoveraction:alarm-confirmed-alarm",
                     "activeMessage": "Alarm confirmed - call police!",
                     "activeMessagePriority": 2,
                     "inactiveMessage": "Confirmed alarm reset",
                     "inactiveMessagePriority": 2,
                     "source": "gpiostate:alarm-confirmed-alarm",
                     "target": "usergroup:key-holders"
                  },
                  {
                     "name": "pushoveraction:internet-connection",
                     "activeMessage": "Internet connection to home has been lost!",
                     "activeMessagePriority": 1,
                     "inactiveMessage": "Internet connection to home restored",
                     "inactiveMessagePriority": 0,
                     "source": "activator:debounced-home-internet-connection",
                     "target": "usergroup:admins"
                  },
                  {
                     "name": "pushoveraction:internet-connection-armed",
                     "activeMessage": "Internet connection to home has been lost while alarm is fully armed!",
                     "activeMessagePriority": 2,
                     "inactiveMessage": "Internet connection to home restored",
                     "inactiveMessagePriority": 0,
                     "source": "andactivator:home-internet-connection-armed",
                     "target": "usergroup:key-holders"
                  },
                  {
                     "name": "pushoveraction:alarm-casa-status",
                     "activeMessage": "Casa 'alarm' is active",
                     "activeMessagePriority": 0,
                     "inactiveMessage": "Casa 'alarm' has gone down!",
                     "inactiveMessagePriority": 1,
                     "source": "activator:debounced-casa-alarm",
                     "target": "usergroup:admins"
                  },
                  {
                     "name": "pushoveraction:alarm-lounge",
                     "activeMessage": "Motion in lounge - Started recording!",
                     "activeMessagePriority": 2,
                     "inactiveMessage": "Motion in lounge ended - Finished recording",
                     "inactiveMessagePriority": 0,
                     "source": "andactivator:lounge-activity",
                     "target": "usergroup:key-holders"
                  },
                  {
                     "name": "pushoveraction:daylight-non-adjusted",
                     "activeMessage": "Good morning!",
                     "activeMessagePriority": 0,
                     "inactiveMessage": "Good evening!",
                     "inactiveMessagePriority": 0,
                     "source": "schedulestate:daylight-non-adjusted",
                     "target": "usergroup:admins"
                  }
               ]
            }
         ]
      },
      {
         "name": "casaarea:home",
         "displayName": "Casa Collin Home",
         "parentArea": "casaarea:internet",
         "casas": [
            {
               "name": "casa:alarm",
               "displayName": "Texecom Alarm",
               "address": {
                  "hostname": "pi-alarm.home",
                  "port": 80
               },
               "props": {},
               "states": [
                  {
                     "name": "gpiostate:alarm-tamper-alarm",
                     "gpioPin": 4,
                     "triggerLow": true
                  },
                  {
                     "name": "gpiostate:alarm-mains-failure",
                     "gpioPin": 17,
                     "triggerLow": true
                  },
                  {
                     "name": "gpiostate:alarm-fire-alarm",
                     "gpioPin": 18,
                     "triggerLow": true
                  },
                  {
                     "name": "gpiostate:alarm-fully-armed",
                     "gpioPin": 22,
                     "triggerLow": true
                  },
                  {
                     "name": "gpiostate:alarm-part-armed",
                     "gpioPin": 23,
                     "triggerLow": true
                  },
                  {
                     "name": "gpiostate:alarm-in-alarm",
                     "gpioPin": 24,
                     "triggerLow": true
                  },
                  {
                     "name": "gpiostate:alarm-confirmed-alarm",
                     "gpioPin": 25,
                     "triggerLow": true
                  },
                  {
                     "name": "gpiostate:alarm-lounge-pir",
                     "gpioPin": 27,
                     "triggerLow": true
                  }
               ],
               "activators": [
                  {
                     "name": "activator:alarm-lounge-pir",
                     "source": "gpiostate:alarm-lounge-pir",
                     "minOutputTime": 15
                  },
                  {
                     "name": "andactivator:lounge-activity",
                     "sources": [
                        "activator:alarm-lounge-pir",
                        "gpiostate:alarm-fully-armed"
                     ]
                  }
               ],
               "actions": [
                  {
                     "name": "spycameraaction:lounge",
                     "cctvHostname": "192.168.1.245",
                     "cctvPort": 8000,
                     "userId": "ricol99",
                     "password": "carrot99",
                     "cameraId": 1,
                     "source": "andactivator:lounge-activity"
                  }
               ]
            },
            {
               "name": "casa:cctv",
               "displayName": "CCTV",
               "address": {
                  "hostname": "lx9901827.home",
                  "port": 81
               },
               "props": {},
               "states": [
                  {
                     "name": "schedulestate:daylight-non-adjusted",
                     "startRule": "sunriseEnd",
                     "endRule": "sunsetStart"
                  },
                  {
                     "name": "schedulestate:lengthened-daylight",
                     "startRule": "sunrise:-900",
                     "endRule": "sunset+900"
                  },
                  {
                     "name": "schedulestate:sunrise-for-one-hour",
                     "startRule": "sunriseEnd:",
                     "activeFor": 3600
                  },
                  {
                     "name": "schedulestate:test-state",
                     "startRule": "0,5,10,15,20,25,30,35,40,45,50,55 * * * *",
                     "activeFor": 30
                  },
                  {
                     "name": "teststate:alarm-part-armed",
                     "writable": true
                  },
                  {
                     "name": "teststate:schedule-test",
                     "writable": true
                  }
               ],
               "activators": [
                  {
                     "name": "activator:night-non-adjusted",
                     "source": "schedulestate:daylight-non-adjusted",
                     "invert": true
                  }
               ],
               "actions": [
                  {
                  "name": "setstateaction:test-scheduling-state",
                  "source": "schedulestate:test-state",
                  "target": "teststate:schedule-test"
                  },
                  {
                  "name": "setstateaction:test-daylight-state",
                  "source": "schedulestate:daylight-non-adjusted",
                  "target": "teststate:schedule-test"
                  }
               ]
            },
            {
               "name": "casa:light",
               "displayName": "Light Controller",
               "address": {
                  "hostname": "pi-light.home",
                  "port": 80
               },
               "props": {},
               "states": [
               ],
               "activators": [
               ],
               "actions": [
               ]
            }
         ]
      }
   ]
}


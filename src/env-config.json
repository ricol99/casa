{
   "name": "casa:env",
   "displayName": "Casa Collin Environment Casa",
   "gang": "casa-collin-v2",
   "listeningPort": 8097,
   "props": [],
   "things": [
      {
         "name": "lightwaverflink:home",
         "displayName": "LightwaveRF Wifi Link",
         "props": [
            {
               "name": "ipAddress",
               "initialValue": "192.168.1.236",
               "writable": false
            }
         ]
      },
      {
         "name": "thing:dumgoyne-sensors",
         "displayName": "Environment Sensors in Dumgoyne",
         "props": [
            {
               "name": "light-sensor",
               "initialValue": 0,
               "writable": false,
               "binder": {
                  "name": "i2cpropertybinder:light-channel-1",
                  "address1": 104,
                  "address2": 105,
                  "channel": 1,
                  "interval": 5,
                  "maxChange": 5,
                  "maxIgnore": 18,
                  "inputMin": 3.291,
                  "inputMax": 0,
                  "outputMin": 0,
                  "outputMax": 100,
                  "outputResolution": 100,
                  "floorOutput": true
               }
            }
         ]
      },
      {
         "name": "thing:dumgoyne-environment",
         "displayName": "Environment Based on Sensors in Dumgoyne",
         "props": [
            {
               "name": "daylight",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "thresholdpropertybinder:dumgoyne-env-daylight",
                  "threshold" : 40,
                  "buffer": 5,
                  "sources": [
                     {
                        "source": "thing:dumgoyne-sensors",
                        "sourceProperty": "light-sensor",
                        "inputTransform": "$value>=40"
                     }
                  ]
               }
            },
            {
               "name": "low-light",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "thresholdpropertybinder:dumgoyne-env-low-light",
                  "threshold" : 55,
                  "buffer": 5,
                  "sources": [
                     {
                        "source": "thing:dumgoyne-sensors",
                        "sourceProperty": "light-sensor",
                        "inputTransform": "$value<=55"
                     }
                  ]
               }
            },
            {
               "name": "background-lights",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "schedulepropertybinder:dumgoyne-env-background-lights",
                  "source": "thing:dumgoyne-environment",
                  "sourceProperty": "daylight",
                  "inputTransform": "!$value",
                  "events": [
                     {
                        "rule": "30 22 * * *",
                        "propertyValue": false
                     }
                  ]
               }
            }
         ]
      },
      {
         "name": "hklightaccessory:automated-lounge-lights",
         "displayName": "Automated Lounge Lights",
         "pincode": "111-11-111",
         "username": "CC:22:3D:E3:CE:32",
         "manufacturer": "Test Light Ltd",
         "model": "V0.1",
         "serialNumber": "1234567890",
         "brightnessSupported": true,
         "props": [
         ]
      },
      {
         "name": "room:kitchen",
         "displayName": "Kitchen Room",
         "props": [
            {
               "name": "movement",
               "initialValue": false,
               "writable": false,
               "binder" : {
                  "name": "latchingpropertybinder:kitchen-movement",
                  "source": "alarm:home",
                  "sourceProperty": "kitchen-pir",
                  "minOutputTime": 600
               }
            },
            {
               "name": "movement-in-low-light",
               "initialValue": false,
               "writable": false,
               "binder" : {
                  "name": "andpropertybinder:kitchen-movement-in-low-light",
                  "sources": [
                     {
                        "source": "thing:environment",
                        "sourceProperty": "low-light"
                     },
                     {
                        "source": "room:kitchen",
                        "sourceProperty": "movement"
                     }
                  ]
               }
            },
            {
               "name": "automated-lighting-mood",
               "initialValue": "off",
               "writable": false,
               "binder": {
                  "name": "orpropertybinder:kitchen-lighting-mood",
                  "prioritiseSources": true,
                  "sources": [
                     {
                        "source": "room:kitchen",
                        "sourceProperty": "movement-in-low-light",
                        "outputValues": {
                           "true": "medium",
                           "false": "off"
                        }
                     },
                     {
                        "source": "thing:environment",
                        "sourceProperty": "background-lights",
                        "outputValues": {
                           "true": "low",
                           "false": "off"
                        }
                     }
                  ]
               }
            }
         ],
         "things": [
            {
               "name": "hklightaccessory:kitchen-lights",
               "displayName": "Kitchen Room Lights",
               "pincode": "111-11-111",
               "username": "CC:22:3D:E3:CE:33",
               "manufacturer": "Lightwave RF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "brightnessSupported": true,
               "props": [
                  {
                     "name": "mood",
                     "initialValue": "off",
                     "writeable": true,
                     "binder": {
                        "name": "propertybinder:automated-kitchen-lights-mood",
                        "source": "room:kitchen",
                        "sourceProperty": "automated-lighting-mood"
                     }
                  }
               ],
               "things": [
                  {
                     "name": "lightwaverfaccessory:kitchen-lights-mood",
                     "displayName": "Kitchen Lights Mood",
                     "roomID": 2,
                     "lightwaveRfLink": "lightwaverflink:home",
                     "moods": [
                        {
                           "name": "low",
                           "id": 1,
                           "low": 0,
                           "high": 50
                        },
                        {
                           "name": "medium",
                           "id": 2,
                           "low": 34,
                           "high": 76
                        },
                        {
                           "name": "full",
                           "id": 3,
                           "low": 77,
                           "high": 100
                        }
                     ],
                     "props": [
                     ]
                  }
               ]
            }
         ]
      },
      {
         "name": "room:lounge",
         "displayName": "Lounge Room",
         "props": [
            {
               "name": "movement",
               "initialValue": false,
               "writable": false,
               "binder" : {
                  "name": "latchingpropertybinder:lounge-movement",
                  "source": "alarm:home",
                  "sourceProperty": "lounge-pir",
                  "minOutputTime": 600
               }
            },
            {
               "name": "movement-in-low-light",
               "initialValue": false,
               "writable": false,
               "binder" : {
                  "name": "andpropertybinder:lounge-movement-in-low-light",
                  "sources": [
                     {
                        "source": "thing:environment",
                        "sourceProperty": "low-light"
                     },
                     {
                        "source": "room:lounge",
                        "sourceProperty": "movement"
                     }
                  ]
               }
            },
            {
               "name": "automated-lighting-brightness",
               "initialValue": "off",
               "writable": false,
               "binder": {
                  "name": "orpropertybinder:auto-lounge-lighting-brightness",
                  "prioritiseSources": true,
                  "sources": [
                     {
                        "source": "room:lounge",
                        "sourceProperty": "movement-in-low-light",
                        "outputValues": {
                           "true": 60,
                           "false": 0
                        }
                     },
                     {
                        "source": "thing:environment",
                        "sourceProperty": "background-lights",
                        "outputValues": {
                           "true": 40,
                           "false": 0
                        }
                     }
                  ]
               }
            }
         ],
         "things": [
            {
               "name": "hklightaccessory:lounge-lights",
               "displayName": "Lounge Room Lights",
               "pincode": "111-11-111",
               "username": "CC:22:3D:E3:CE:31",
               "manufacturer": "Lounge Light Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "brightnessSupported": true,
               "props": [
                  {
                     "name": "brightness",
                     "initialValue": 100,
                     "writeable": true,
                     "binder": {
                        "name": "propertybinder:automated-lounge-lights-brightness",
                        "source": "room:lounge",
                        "sourceProperty": "automated-lighting-brightness"
                     }
                  }
               ],
               "things": [
                  {
                     "name": "lightwaverfaccessory:wall-lights",
                     "displayName": "Lounge Wall Lights",
                     "roomID": 1,
                     "deviceID": 1,
                     "brightnessSupported": true,
                     "lightwaveRfLink": "lightwaverflink:home",
                     "props": [
                     ]
                  },
                  {
                     "name": "lightwaverfaccessory:table-lamps",
                     "displayName": "Lounge Table Lamps",
                     "roomID": 1,
                     "deviceID": 2,
                     "brightnessThreshold": 30,
                     "lightwaveRfLink": "lightwaverflink:home",
                     "props": [
                     ]
                  }
               ]
            }
         ]
      },
      {
         "name": "room:outside",
         "displayName": "Outside",
         "props": [
         ],
         "things": [
            {
               "name": "hklightaccessory:back-door-outside-light",
               "displayName": "Back Door Outside Light",
               "pincode": "111-11-111",
               "username": "CC:22:3D:E3:CE:37",
               "manufacturer": "LightwaveRF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "props": [
               ],
               "things": [
                  {
                     "name": "lightwaverfaccessory:back-door-outside-light",
                     "displayName": "Back Door Outside Light",
                     "roomID": 3,
                     "deviceID": 1,
                     "brightnessSupported": true,
                     "lightwaveRfLink": "lightwaverflink:home",
                     "props": [
                     ]
                  }
               ]
            },
            {
               "name": "hklightaccessory:rear-garden-outside-lights",
               "displayName": "Rear Garden Outside Lights",
               "pincode": "111-11-111",
               "username": "CC:22:3D:E3:CE:38",
               "manufacturer": "LightwaveRF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "props": [
               ],
               "things": [
                  {
                     "name": "lightwaverfaccessory:bifold-outside-light",
                     "displayName": "Bifold Outside Light",
                     "roomID": 3,
                     "deviceID": 2,
                     "brightnessSupported": true,
                     "lightwaveRfLink": "lightwaverflink:home",
                     "props": [
                     ]
                  },
                  {
                     "name": "lightwaverfaccessory:lounge-outside-light",
                     "displayName": "Lounge Outside Light",
                     "roomID": 3,
                     "deviceID": 3,
                     "brightnessSupported": true,
                     "lightwaveRfLink": "lightwaverflink:home",
                     "props": [
                     ]
                  }
               ]
            }
         ]
      },
      {
         "name": "room:hall-landing-snug",
         "displayName": "Hall, Landing and Snug Rooms",
         "props": [
         ],
         "things": [
            {
               "name": "hklightaccessory:hall-table-lamp",
               "displayName": "Hall Table Lamp",
               "pincode": "111-11-111",
               "username": "CC:22:3D:E3:CE:39",
               "manufacturer": "LightwaveRF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "props": [
               ],
               "things": [
                  {
                     "name": "lightwaverfaccessory:hall-table-lamp",
                     "displayName": "Hall Table Lamp",
                     "roomID": 4,
                     "deviceID": 1,
                     "lightwaveRfLink": "lightwaverflink:home",
                     "props": [
                     ]
                  }
               ]
            },
            {
               "name": "hklightaccessory:loo-main-light",
               "displayName": "Loo Main Light",
               "pincode": "111-11-111",
               "username": "CC:22:3D:E3:CE:3A",
               "manufacturer": "LightwaveRF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "props": [
               ],
               "things": [
                  {
                     "name": "lightwaverfaccessory:loo-main-light",
                     "displayName": "Loo Main Light",
                     "roomID": 4,
                     "deviceID": 2,
                     "brightnessSupported": true,
                     "lightwaveRfLink": "lightwaverflink:home",
                     "props": [
                     ]
                  }
               ]
            },
            {
               "name": "hklightaccessory:snug-main-light",
               "displayName": "Snug Main Light",
               "pincode": "111-11-111",
               "username": "CC:22:3D:E3:CE:3B",
               "manufacturer": "LightwaveRF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "props": [
               ],
               "things": [
                  {
                     "name": "lightwaverfaccessory:snug-main-light",
                     "displayName": "Snug Main Light",
                     "roomID": 4,
                     "deviceID": 3,
                     "brightnessSupported": true,
                     "lightwaveRfLink": "lightwaverflink:home",
                     "props": [
                     ]
                  }
               ]
            }
         ]
      },
      {
         "name": "room:utility-room",
         "displayName": "Utility Room",
         "props": [
         ],
         "things": [
            {
               "name": "hklightaccessory:utility-lights",
               "displayName": "Utility Lights",
               "pincode": "111-11-111",
               "username": "CC:22:3D:E3:CE:3C",
               "manufacturer": "LightwaveRF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "props": [
               ],
               "things": [
                  {
                     "name": "lightwaverfaccessory:utility-main-light",
                     "displayName": "Utility Light",
                     "roomID": 2,
                     "deviceID": 3,
                     "brightnessSupported": true,
                     "lightwaveRfLink": "lightwaverflink:home",
                     "props": [
                     ]
                  }
               ]
            }
         ]
      },
      {
         "name": "room:master-bedroom",
         "displayName": "Master Bedroom",
         "props": [
         ],
         "things": [
            {
               "name": "hklightaccessory:master-bedroom-lights",
               "displayName": "Bedroom Lights",
               "pincode": "111-11-111",
               "username": "CC:22:3D:E3:CE:36",
               "manufacturer": "LightwaveRF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "props": [
                  {
                     "name": "power",
                     "initialValue": false,
                     "writeable": true,
                     "binder": {
                        "name": "propertybinder:automated-master-bedroom-lights-power",
                        "source": "thing:environment",
                        "sourceProperty": "bedtime"
                     }
                  }
               ],
               "things": [
                  {
                     "name": "lightwaverfaccessory:natalie-table-lamp",
                     "displayName": "Natalie Table Lamp",
                     "roomID": 1,
                     "deviceID": 3,
                     "lightwaveRfLink": "lightwaverflink:home",
                     "props": [
                     ]
                  }
               ]
            }
         ]
      }
   ]
}

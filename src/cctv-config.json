{
   "name": "casa:cctv",
   "displayName": "Casa Collin CCTV System",
   "gang": "casa-collin-v2",
   "parentCasa": {
      "name": "casa:internet",
      "address": {
         "hostname": "localhost",
         "port": 8096
      }
   },
   "listeningPort": 8082,
   "props": {},
   "things": [
      {
         "name": "thing:home-daylight-sensor",
         "displayName": "Home daylight sensor",
         "props": [
            {
               "name": "lightLevel",
               "initialValue": 100,
               "writable": false,
               "binder": {
                  "name": "orpropertybinder:light-level",
                  "sources": [
                     {
                        "source": "thing:test-cctv",
                        "sourceProperty": "test-prop-2",
                        "outputValues": {
                           "true": 30,
                           "false": 100
                        }
                     }
                  ]
               }
            }
         ]
      },
      {
         "name": "thing:test-daylight-sensor",
         "displayName": "Test daylight sensor",
         "props": [
            {
               "name": "manual-mode",
               "initialValue": "false",
               "writable": false,
               "binder": {
                  "name": "propertybinder:copy-property",
                  "sources": [
                     {
                        "source": "thing:test-cctv",
                        "sourceProperty": "test-prop-4"
                     }
                  ]
               }
            },
            {
               "name": "test-smooth-transform",
               "initialValue": 0,
               "writable": false,
               "binder": {
                  "name": "smoothtransformpropertybinder:test-smooth-transform",
                  "rate": 10,
                  "resolution": 5,
                  "source": "thing:home-daylight-sensor",
                  "sourceProperty": "lightLevel"
               }
            },
            {
               "name": "alarm-status",
               "initialValue": "white",
               "writable": false,
               "binder": {
                  "name": "orpropertybinder:test-flip-flop",
                  "prioritiseSources": true,
                  "sources": [
                     {
                        "source": "thing:test-cctv",
                        "sourceProperty": "test-prop-1",
                        "outputValues": {
                           "true": "green",
                           "false": "white"
                        }
                     },
                     {
                        "source": "thing:home-daylight-sensor",
                        "sourceProperty": "lightLevel",
                        "inputTransform": "$value<50",
                        "outputValues": {
                           "true": "red",
                           "false": "blue"
                        }
                     }
                  ]
               }
            },
            {
               "name": "smallerLightLevel",
               "initialValue": 0,
               "writable": false,
               "binder": {
                  "name": "lineartransformpropertybinder:test-light-level-transform",
                  "inputMin": 0,
                  "inputMax": 100,
                  "outputMin": 10,
                  "outputMax": 0,
                  "source": "thing:home-daylight-sensor",
                  "sourceProperty": "lightLevel"
               }
            },
            {
               "name": "daylight",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "schedulepropertybinder:env-daylight",
                  "events": [
                     {
                        "rule": "sunrise",
                        "propertyValue": true
                     },
                     {
                        "rule": "sunset:-1800",
                        "propertyValue": false
                     }
                  ]
               }
            },
            {
               "name": "dark",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "schedulepropertybinder:env-daylight",
                  "events": [
                     {
                        "rule": "sunrise",
                        "propertyValue": false
                     },
                     {
                        "rule": "sunset:-1800",
                        "propertyValue": true
                     }
                  ]
               }
            }
         ]
      },
      {
         "name": "thing:test-cctv",
         "displayName": "Test CCTV Config",
         "props": [
            {
               "name": "test-prop-1",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "schedulepropertybinder:test-prop-binder-1",
                  "events": [
                     {
                        "rule": "1,6,11,16,21,26,31,36,41,46,51,56 * * * *",
                        "propertyValue": true
                     },
                     {
                        "rule": "3,8,13,18,23,28,33,38,43,48,53,58 * * * *",
                        "propertyValue": false
                     }
                  ]
               }
            },
            {
               "name": "test-prop-2",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "schedulepropertybinder:test-prop-binder-2",
                  "events": [
                     {
                        "rule": "0,5,10,15,20,25,30,35,40,45,50,55 * * * *",
                        "propertyValue": true
                     },
                     {
                        "rule": "2,7,12,17,22,27,32,37,42,47,52,57 * * * *",
                        "propertyValue": false
                     }
                  ]
               }
            },
            {
               "name": "test-prop-3",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "schedulepropertybinder:test-prop-binder-3",
                  "events": [
                     {
                        "rule": "0,5,10,15,20,25,30,35,40,45,50,55 * * * *",
                        "propertyValue": true
                     },
                     {
                        "rule": "3,8,13,18,23,28,33,38,43,48,53,58 * * * *",
                        "propertyValue": false
                     }
                  ]
               }
            },
            {
               "name": "test-prop-4",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "schedulepropertybinder:test-prop-binder-4",
                  "events": [
                     {
                        "rule": "0,20,40 * * * *",
                        "propertyValue": true
                     },
                     {
                        "rule": "10,30,50 * * * *",
                        "propertyValue": false
                     }
                  ]
               }
            },
            {
               "name": "latching-test-prop-2",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "latchingpropertybinder:latching-test-prop-2",
                  "source": "thing:test-cctv",
                  "sourceProperty": "test-prop-2",
                  "controller": {
                     "source": "thing:test-cctv",
                     "sourceProperty": "test-prop-3"
                  }
               }
            },
            {
               "name": "test-schedule-ramp",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "schedulepropertybinder:test-schedule-ramp",
                  "events": [
                     {
                        "rule": "0,5,10,15,20,25,30,35,40,45,50,55 * * * *",
                        "ramp": {
                           "startValue": 0,
                           "endValue": 100,
                           "step": 2,
                           "duration": 50
                        }
                     },
                     {
                        "rule": "3,8,13,18,23,28,33,38,43,48,53,58 * * * *",
                        "ramp": {
                           "endValue": 0,
                           "step": -2,
                           "duration": 50
                        }
                     }
                  ]
               }
            },
            {
               "name": "test-property-broken",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "propertybinder:broken-binder-test",
                  "source": "propertyactivator:test-source-not-found",
                  "sourceProperty": "test-prop-not-found"
               }
            }
         ]
      }
   ]
}

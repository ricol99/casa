{
   "name": "casa:cctv",
   "displayName": "Casa Collin CCTV System",
   "gang": "casa-collin",
   "parentCasa": {
      "name": "casa:internet",
      "address": {
         "hostname": "localhost",
         "port": 80
      }
   },
   "listeningPort": 8081,
   "props": {},
   "users": [],
   "things": [
      {
         "name": "thing:home-daylight-sensor",
         "displayName": "Home daylight sensor",
         "props": [
            {
               "name": "lightLevel",
               "initialValue": 100,
               "writable": true
            }
         ]
      },
      {
         "name": "thing:test-daylight-sensor",
         "displayName": "Test daylight sensor",
         "props": [
            {
               "name": "smallerLightLevel",
               "initialValue": 0,
               "writable": true
            }
         ]
      },
      {
         "name": "thing:test-cctv",
         "displayName": "Test CCTV Config",
         "props": [
            {
               "name": "test-prop-1",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "schedulepropertybinder:test-prop-binder-1",
                  "events": [
                     {
                        "rule": "1,6,11,16,21,26,31,36,41,46,51,56 * * * *",
                        "propertyValue": true
                     },
                     {
                        "rule": "3,8,13,18,23,28,33,38,43,48,53,58 * * * *",
                        "propertyValue": false
                     }
                  ]
               }
            },
            {
               "name": "test-prop-2",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "schedulepropertybinder:test-prop-binder-2",
                  "events": [
                     {
                        "rule": "0,5,10,15,20,25,30,35,40,45,50,55 * * * *",
                        "propertyValue": true
                     },
                     {
                        "rule": "2,7,12,17,22,27,32,37,42,47,52,57 * * * *",
                        "propertyValue": false
                     }
                  ]
               }
            },
            {
               "name": "latching-test-prop-2",
               "initialValue": 0,
               "writable": true,
               "binder": {
                  "name": "latchingpropertybinder:latching-test-prop-2",
                  "source": "thing:test-cctv",
                  "sourceProperty": "test-prop-2",
                  "minOutputTime": 150
               }
            }
         ]
      }
   ],
   "transforms" : [
      {
         "name": "lineartransform:test-light-level-transform",
         "inputMin": 0,
         "inputMax": 100,
         "outputMin": 10,
         "outputMax": 0,
         "source": "thing:home-daylight-sensor",
         "sourceProperty": "lightLevel",
         "target": "thing:test-daylight-sensor",
         "targetProperty": "smallerLightLevel"
      }
   ],
   "activators": [
      {
         "name": "propertyactivator:test-light-level-prop",
         "source": "thing:home-daylight-sensor",
         "sourceProperty": "lightLevel",
         "triggerCondition": "<",
         "triggerValue": 50,
         "applyProps": {
            "active" : {
               "colour": "red"
            },
            "inactive" : {
               "colour": "blue"
            }
         }
      },
      {
         "name": "propertyactivator:test-property-1",
         "source": "thing:test-cctv",
         "sourceProperty": "test-prop-1",
         "applyProps": {
            "active" : {
               "colour": "green"
            },
            "inactive" : {
               "colour": "white"
            }
         }
      },
      {
         "name": "propertyactivator:test-property-2",
         "source": "thing:test-cctv",
         "sourceProperty": "test-prop-2",
         "applyProps": {
            "active" : {
               "lightLevel": 30
            },
            "inactive" : {
               "lightLevel": 100
            }
         }
      },
      {
         "name": "oractivator:test-flip-flop",
         "sources": [
            "propertyactivator:test-property-1",
            "propertyactivator:test-light-level-prop"
         ]
      }
   ],
   "actions": [
      {
         "name": "setpropertyaction:test-property-broken",
         "source": "propertyactivator:test-activator-not-found",
         "target": "thing:-test-not-gonna-find-me-yet",
         "targetProperty": "nothing"
      },
      {
         "name": "setpropertyaction:test-set-property-action",
         "source": "propertyactivator:test-property-2",
         "target": "thing:home-daylight-sensor",
         "targetProperty": "lightLevel"
      },
      {
         "name": "setpropertyaction:alarm-action",
         "source": "oractivator:test-flip-flop",
         "target": "alarm:home",
         "targetProperty": "colour"
      }
   ]
}

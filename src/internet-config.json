{
   "name": "casa:internet",
   "displayName": "Casa Collin Internet Casa",
   "gang": "casa-collin",
   "area": {
      "name": "casaarea:internet",
      "displayName": "Casa Collin Internet"
   },
   "listeningPort": 80,
   "props": [],
   "users": [ 
      {
         "name": "user:richard",
         "displayName": "Richard",
         "props": []
      },
      {
         "name": "user:natalie",
         "displayName": "Natalie",
         "props": []
      },
      {
         "name": "usergroup:admins",
         "displayName": "Administrators",
         "users": [
           "user:richard"
         ],
         "props": [
            {
               "name": "pushoverDestAddr",
               "initialValue": "gX5JLc28t775dYr1yjuo4p38t7hziV",
               "writable": false,
               "binder": {
                  "name": "i2cpropertybinder:pushoverDestAddr",
                  "address": 24
               }
            }
         ]
      },
      {
         "name": "usergroup:key-holders",
         "displayName": "Key Holders",
         "users": [
           "user:richard",
           "user:natalie"
         ],
         "props": [
            {
               "name": "pushoverDestAddr",
               "initialValue": "g7KTUJvsJbPUNH5SL8oEitXBBuL32j",
               "writable": false
            }
         ]
      }
   ],
   "things": [
      {
         "name": "alarm:home",
         "displayName": "House Alarm",
         "props": [
            {
               "name": "ipAddress",
               "initialValue": "192.168.1.90",
               "writable": false
            },
            {
               "name": "colour",
               "initialValue": "white",
               "writable": true
            }
         ]
      },
      {
         "name": "thing:home-internet-connection",
         "displayName": "Home Internet Connection",
         "props": [
            {
               "name": "ACTIVE",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "propertybinder:home-casas",
                  "source": "thing:home-internet-connection",
                  "sourceProperty": "debounced-home-casas"
               }
            },
            {
               "name": "home-casas",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "orpropertybinder:home-casas",
                  "sources": [
                     "casa:alarm",
                     "casa:cctv",
                     "casa:light"
                  ]
               }
            },
            {
               "name": "debounced-home-casas",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "debouncingpropertybinder:home-casas",
                  "source": "thing:home-internet-connection",
                  "sourceProperty": "home-casas",
                  "threshold": 20
               }
            },
            {
               "name": "home-internet-while-armed",
               "initialValue": false,
               "writable": false,
               "binder": {
                  "name": "andpropertybinder:home-internet-while-armed",
                  "sources": [
                     {
                        "source": "thing:home-internet-connection"
                     },
                     {
                        "source": "alarm:home",
                        "sourceProperty": "alarm-fully-armed"
                     }
                  ]
               }
            }
         ]
      }
   ],
   "transforms" : [],
   "activators": [
      {
         "name": "debounceactivator:debounced-casa-alarm",
         "source": "casa:alarm",
         "threshold": 60
      },
      {
         "name": "debounceactivator:debounced-casa-cctv",
         "source": "casa:cctv",
         "threshold": 60
      }
   ],
   "actions": [
      {
         "name": "pushoveraction:alarm-tamper-alarm",
         "activeMessage": "Alarm being tampered with!",
         "activeMessagePriority": 2,
         "inactiveMessage": "Alarm no longer in tamper mode",
         "inactiveMessagePriority": 0,
         "source": "alarm:home",
         "sourceProperty": "alarm-tamper-alarm",
         "target": "usergroup:key-holders"
      },
      {
         "name": "pushoveraction:alarm-mains-failure",
         "activeMessage": "Alarm has lost mains power!",
         "activeMessagePriority": 2,
         "inactiveMessage": "Alarm mains power restored",
         "inactiveMessagePriority": 0,
         "source": "alarm:home",
         "sourceProperty": "alarm-mains-failure",
         "target": "usergroup:key-holders"
      },
      {
         "name": "pushoveraction:alarm-fire-alarm",
         "activeMessage": "Fire Alarm!",
         "activeMessagePriority": 2,
         "inactiveMessage": "Fire alarm reset",
         "inactiveMessagePriority": 0,
         "source": "alarm:home",
         "sourceProperty": "alarm-fire-alarm",
         "target": "usergroup:key-holders"
      },
      {
         "name": "pushoveraction:alarm-fully-armed",
         "activeMessage": "Alarm armed",
         "activeMessagePriority": 0,
         "inactiveMessage": "Alarm disarmed",
         "inactiveMessagePriority": 0,
         "source": "alarm:home",
         "sourceProperty": "alarm-fully-armed",
         "target": "usergroup:admins"
      },
      {
         "name": "pushoveraction:alarm-part-armed",
         "activeMessage": "Alarm part armed",
         "activeMessagePriority": 0,
         "inactiveMessage": "Alarm disarmed",
         "inactiveMessagePriority": 0,
         "source": "alarm:home",
         "sourceProperty": "alarm-part-armed",
         "target": "usergroup:admins"
      },
      {
         "name": "pushoveraction:alarm-in-alarm",
         "activeMessage": "Alarm triggered",
         "activeMessagePriority": 2,
         "inactiveMessage": "Alarm trigger reset",
         "inactiveMessagePriority": 2,
         "source": "alarm:home",
         "sourceProperty": "alarm-in-alarm",
         "target": "usergroup:key-holders"
      },
      {
         "name": "pushoveraction:alarm-confirmed-alarm",
         "activeMessage": "Alarm confirmed - call police!",
         "activeMessagePriority": 2,
         "inactiveMessage": "Confirmed alarm reset",
         "inactiveMessagePriority": 2,
         "source": "alarm:home",
         "sourceProperty": "alarm-confirmed-alarm",
         "target": "usergroup:key-holders"
      },
      {
         "name": "pushoveraction:internet-connection",
         "activeMessage": "Internet connection to home restored",
         "activeMessagePriority": 0,
         "inactiveMessage": "Internet connection to home has been lost!",
         "inactiveMessagePriority": 1,
         "source": "thing:home-internet-connection",
         "target": "usergroup:admins"
      },
      {
         "name": "pushoveraction:internet-connection-armed",
         "activeMessage": "Internet connection to home has been lost while alarm is fully armed!",
         "activeMessagePriority": 2,
         "inactiveMessage": "Internet connection to home restored",
         "inactiveMessagePriority": 0,
         "source": "andactivator:home-internet-connection-armed",
         "target": "usergroup:key-holders"
      },
      {
         "name": "pushoveraction:alarm-casa-status",
         "activeMessage": "Casa 'alarm' is active",
         "activeMessagePriority": 0,
         "inactiveMessage": "Casa 'alarm' has gone down!",
         "inactiveMessagePriority": 1,
         "source": "debounceactivator:debounced-casa-alarm",
         "target": "usergroup:admins"
      },
      {
         "name": "pushoveraction:cctv-casa-status",
         "activeMessage": "Casa 'cctv' is active",
         "activeMessagePriority": 0,
         "inactiveMessage": "Casa 'cctv' has gone down!",
         "inactiveMessagePriority": 1,
         "source": "debounceactivator:debounced-casa-cctv",
         "target": "usergroup:admins"
      },
      {
         "name": "pushoveraction:daylight-non-adjusted",
         "activeMessage": "Good morning!",
         "activeMessagePriority": 0,
         "inactiveMessage": "Good evening!",
         "inactiveMessagePriority": 0,
         "source": "thing:environment",
         "sourceProperty": "daylight",
         "target": "usergroup:admins"
      },
      {
         "name": "pushoveraction:lights-on",
         "activeMessage": "Lights going on",
         "activeMessagePriority": 0,
         "inactiveMessage": "Lights going off. Goodnight!",
         "inactiveMessagePriority": 0,
         "source": "propertyactivator:holiday-background-lights",
         "target": "usergroup:admins"
      }
   ]
}

{
   "casa": {
      "uName": "casa:test-bedroom",
      "displayName": "Casa Collin Test Bedroom",
      "gang": "gang:collin-test",
      "listeningPort": 8084
   },
   "services": [
      {
         "uName": "webservice",
         "port": 11003,
         "mediaPath": "/Users/richardcollin/personal/media",
         "secure": false,
         "serverKey": "",
         "serverCert": "",
         "caCert": ""
      }
   ],
   "scenes": [
   ],
   "things": [
      {
         "uName": "tester:bedroom",
         "displayName": "Test thing:bedroom with two users",
         "sources": [
            { "uName": "bedroom:test-bedroom", "property": "test-1-user-state" },
            { "uName": "bedroom:test-bedroom", "property": "test-2-user-state" },
            { "uName": "bedroom:test-bedroom", "property": "room-state" }
         ],
         "testCases": [
            {
               "name": "Normal - both going to bed slightly different times - initiation by bed switches",
               "driveSequence": [
                  { "wait": 13, "event": "test-1-switch-event" },
                  { "wait": 1, "event": "test-2-switch-event" },
                  { "wait": 1, "event": "test-1-switch-event" },
                  { "wait": 1, "event": "test-2-switch-event" },
                  { "wait": 1, "event": "wake-up-event" }
               ],
               "expectedSequence": [
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "initial-reading-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "room-state", "value": "no-users-present-night" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "initial-reading-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "asleep-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "reading-in-bed-others-asleep" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "asleep-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "awake-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "awake-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "room-state", "value": "no-users-present-day" },
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "not-present" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "not-present" }
               ]
            },
            {
               "name": "Normal - both going to bed slightly different times - 2nd user uses room switch as 1st user is asleep",
               "driveSequence": [
                  { "wait": 2, "event": "test-1-switch-event" },
                  { "wait": 1, "event": "test-1-switch-event" },
                  { "wait": 1, "event": "room-switch-event" },
                  { "wait": 1, "event": "test-2-switch-event" },
                  { "wait": 1, "event": "wake-up-event" }
               ],
               "expectedSequence": [
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "initial-reading-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "room-state", "value": "no-users-present-night" },
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "asleep-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "reading-in-bed-others-asleep" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "asleep-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "awake-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "awake-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "room-state", "value": "no-users-present-day" },
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "not-present" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "not-present" }
               ]
            },
            {
               "name": "Normal - timed both going to bed after timer has lit the bedroom - simultaneous move to initial-reading-in-bed",
               "driveSequence": [
                  { "wait": 2, "event": "test-1-switch-event" },
                  { "event": "test-2-switch-event" },
                  { "wait": 1, "event": "test-1-switch-event" },
                  { "wait": 1, "event": "test-2-switch-event" },
                  { "wait": 1, "event": "wake-up-event" }
               ],
               "expectedSequence": [
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "initial-reading-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "initial-reading-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "room-state", "value": "no-users-present-night" },
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "asleep-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "reading-in-bed-others-asleep" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "asleep-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "awake-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "awake-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "room-state", "value": "no-users-present-day" },
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "not-present" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "not-present" }
               ]
            },
            {
               "name": "Normal - btoh going to bed at slightly different times - 1st initiates by movement, then bed switch, 2nd using room switch",
               "driveSequence": [
                  { "wait": 2, "property": "low-light", "value": true },
                  { "wait": 1, "property": "movement-pir", "value": true },
                  { "wait": 1, "property": "movement-pir", "value": false },
                  { "wait": 2, "event": "test-1-switch-event" },
                  { "wait": 1, "event": "test-1-switch-event" },
                  { "wait": 1, "event": "room-switch-event" },
                  { "wait": 1, "event": "test-2-switch-event" },
                  { "wait": 1, "event": "wake-up-event" },
                  { "wait": 6, "property": "low-light", "value": false }
               ],
               "expectedSequence": [
                  { "source": "bedroom:test-bedroom", "property": "room-state", "value": "no-users-present-evening" },
                  { "source": "bedroom:test-bedroom", "property": "room-state", "value": "users-present-evening" },
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "initial-reading-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "room-state", "value": "users-present-night" },
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "asleep-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "reading-in-bed-others-asleep" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "asleep-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "room-state", "value": "no-users-present-night" },
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "awake-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "awake-in-bed" },
                  { "source": "bedroom:test-bedroom", "property": "room-state", "value": "no-users-present-morning" },
                  { "source": "bedroom:test-bedroom", "property": "test-1-user-state", "value": "not-present" },
                  { "source": "bedroom:test-bedroom", "property": "test-2-user-state", "value": "not-present" },
                  { "source": "bedroom:test-bedroom", "property": "room-state", "value": "no-users-present-day" }
               ]
            }
         ],
         "props": [],
         "things": [
            {
               "uName": "bedroom:test-bedroom",
               "displayName": "Test Bedroom",
               "users": [
                  { "uName": "user:test-1" },
                  { "uName": "user:test-2" }
               ],
               "readingInBedTimeout": 10,
               "awakeInBedTimeout": 5,
               "movementTimeout": 4,
               "events": [],
               "props": [
                  {
                     "name": "movement-pir",
                     "initialValue": false
                  },
                  {
                     "name": "low-light",
                     "initialValue": false
                  }
               ]
            }
         ]
      }
   ]
}

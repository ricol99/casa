{
   "casa": {
      "uName": "casa:env",
      "displayName": "Dumgoyne Environment Casa",
      "listeningPort": 8097,
      "gang": "gang:collin"
   },
   "services": [
      {
         "uName": "homekitservice",
         "displayName": "Homekit Service",
         "pincode": "111-11-111",
         "username": "CC:22:3D:E4:CF:ED",
         "manufacturer": "Casa Collin Ltd",
         "model": "V0.1",
         "serialNumber": "1234567890"
      },
      {
         "uName": "gpioservice",
         "displayName": "GPIO Service"
      },
      {
         "uName": "sonosservice",
         "displayName": "Sonos Discovery Service"
      },
      {
         "uName": "hueservice",
         "displayName": "Downstairs Hue Link Services",
         "secureConfig": true
      },
      {
         "uName": "webservice",
         "displayName": "Web Server Service",
         "port": 80,
         "mediaPath": "/web/media",
         "secure": false,
         "serverKey": "",
         "serverCert": "",
         "caCert": ""
      },
      {
         "uName": "lightwaverfservice",
         "displayName": "LightwaveRF Link Service",
         "linkAddress": "192.168.1.49"
      },
      {
         "uName": "pushoverservice",
         "displayName": "Pushover Messaging Service",
         "secureConfig": true
      }
   ],
   "scenes": [
      {
         "uName": "scene:go-on-holiday",
         "sources": [
            {
               "uName": "usergroup:family",
               "property": "on-holiday",
               "value": true
            }
         ],
         "things": [
            {
               "uName": "hkswitchaccessory:holiday-scene",
               "displayName": "Holiday Scene",
               "manufacturer": "Casa Home Automation Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "propogateToParent": true
            }
         ]
      }
   ],
   "things": [
      {
         "uName": "building:dumgoyne",
         "displayName": "Our home in Sussex",
         "priority": 1,
         "users": [
            { "uName": "user:richard" },
            { "uName": "user:natalie" },
            { "uName": "user:dylan" }
         ],
         "bedrooms": [
            { "uName": "bedroom:master" },
            { "uName": "bedroom:dylan" }
         ],
         "rooms": [
            { "uName": "room:kitchen" },
            { "uName": "room:lounge" },
            { "uName": "room:utility-room" },
            { "uName": "room:hall" },
            { "uName": "room:landing" },
            { "uName": "room:snug" },
            { "uName": "room:downstairs-loo" },
            { "uName": "room:master-ensuite" }
         ],
         "props": [
            {
               "name": "low-light",
               "initialValue": false,
               "writable": false,
               "type": "property",
               "sources": [
                  {
                     "property": "low-light-threshold",
                     "transform": "$value<=63"
                  }
               ]
            },
            {
               "name": "daylight-threshold",
               "type": "thresholdproperty",
               "initialValue": 100,
               "writable": false,
               "threshold" : 47,
               "buffer": 7,
               "source": {
                  "property": "light-sensor"
               }
            },
            {
               "name": "low-light-threshold",
               "initialValue": 100,
               "writable": false,
               "type": "thresholdproperty",
               "threshold" : 63,
               "buffer": 7,
               "source": {
                  "property": "light-sensor"
               }
            },
            {
               "name": "low-light-kitchen-threshold",
               "initialValue": 100,
               "writable": false,
               "type": "thresholdproperty",
               "threshold" : 68,
               "buffer": 7,
               "source": {
                  "property": "light-sensor"
               }
            },
            {
               "name": "low-light-kitchen",
               "initialValue": false,
               "writable": false,
               "source": {
                  "property": "low-light-kitchen-threshold",
                  "transform": "$value<=68"
               }
            },
            {
               "name": "daylight-possible",
               "initialValue": false,
               "writable": false,
               "type": "scheduleproperty",
               "events": [
                  {
                     "rule": "sunrise:-600",
                     "value": true
                  },
                  {
                     "rule": "sunset:+600",
                     "value": false
                  }
               ]
            },
            {
               "name": "daylight",
               "initialValue": false,
               "writable": false,
               "type": "andproperty",
               "sources": [
                  {
                     "property": "daylight-threshold",
                     "transform": "$value>=47"
                  },
                  {
                     "property": "daylight-possible"
                  }
               ]
            },
            {
               "name": "dark",
               "initialValue": false,
               "writable": false,
               "sources": [
                  {
                     "property": "daylight",
                     "transform": "!$value"
                  }
               ]
            },
            {
               "name": "security-lights",
               "initialValue": false,
               "writable": false,
               "type": "scheduleproperty",
               "events": [
                  {
                     "rule": "sunset:-100",
                     "value": true
                  },
                  {
                     "rules": ["30 22 * * 0-4", "00 23 * * 5,6" ],
                     "value": false
                  }
               ]
            }
         ],
         "things": [
            {
               "uName": "alarmtexecom:dumgoyne",
               "displayName": "Dumgoyne Alarm",
               "pollingInterval": 2,
               "maxPollMisses": 1,
               "serverPort": 8200,
               "secureConfig": true,
               "props": [
               ],
               "things": [
                  {
                     "uName": "hksecuritysystem:dumgoyne",
                     "displayName": "Dumgoyne Security System",
                     "manufacturer": "Casa Home Automation Ltd",
                     "model": "V0.1",
                     "serialNumber": "1234567890",
                     "propogateToParent": true,
                     "props": [
                     ]
                  }
               ]
            },
            {
               "uName": "hklightsensoraccessory:hk-ambient-light-sensor",
               "displayName": "Ambient Light Level",
               "manufacturer": "Casa Home Automation Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "props": [
                  {
                     "name": "light-level",
                     "initialValue": 0,
                     "writable": false,
                     "source": {
                        "uName": "thing:dumgoyne-sensors",
                        "property": "light-sensor",
                        "transform": "$value*$value"
                     }
                  }
               ]
            },
            {
               "uName": "thing:dumgoyne-sensors",
               "displayName": "Environment Sensors in Dumgoyne",
               "props": [
                  {
                     "name": "light-sensor",
                     "type": "i2cproperty",
                     "initialValue": 0,
                     "writable": false,
                     "address1": 104,
                     "address2": 105,
                     "channel": 1,
                     "interval": 5,
                     "maxChange": 5,
                     "maxIgnore": 18,
                     "inputMin": 3.291,
                     "inputMax": 0,
                     "outputMin": 1,
                     "outputMax": 100,
                     "outputResolution": 99,
                     "floorOutput": true
                  }
               ]
            },
            {
               "uName": "hkswitchaccessory:richard-at-home",
               "displayName": "Richard at Home",
               "manufacturer": "Casa Home Automation Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "switchProp": "richard-present",
               "invokeManualMode": false,
               "propogateToParent": true,
               "props": [
               ]
            },
            {
               "uName": "hkswitchaccessory:natalie-at-home",
               "displayName": "Natalie at Home",
               "manufacturer": "Casa Home Automation Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "switchProp": "natalie-present",
               "invokeManualMode": false,
               "propogateToParent": true,
               "props": [
               ]
            },
            {
               "uName": "hkswitchaccessory:dylan-at-home",
               "displayName": "Dylan at Home",
               "manufacturer": "Casa Home Automation Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "switchProp": "dylan-present",
               "invokeManualMode": false,
               "propogateToParent": true,
               "props": [
               ]
            }
         ]
      },
      {
         "uName": "thing:family",
         "displayName": "Family Properties",
         "props": [
            {
               "name": "on-holiday",
               "initialValue": false
            }
         ],
         "things": [
            {
               "uName": "hkswitchaccessory:family-on-holiday",
               "displayName": "Holiday - Family",
               "manufacturer": "Casa Home Automation Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "switchProp": "on-holiday",
               "propogateToParent": true,
               "props": [
               ]
            }
         ]
      },
      {
         "uName": "thing:dumgoyne-broadband",
         "displayName": "Dumgoyne Internet Connection",
         "things": [
            {
               "uName": "broadbandspeedtester:dumgoyne",
               "propogateToParent": true,
               "maxTime": 5000,
               "events": [
                  {
                     "name": "testing-broadband",
                     "rule": "0 2 * * *"
                  }
               ]
            }
         ]
      },
      {
         "uName": "room:kitchen",
         "displayName": "Kitchen Room",
         "buildingName": "building:dumgoyne",
         "movementTimeout": 600,
         "props": [
            {
               "name": "movement",
               "initialValue": false,
               "writable": false,
               "type": "gpioproperty",
               "gpioPin": 17,
               "triggerLow": true,
               "local": true
            },
            {
               "name": "low-light",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "low-light-kitchen"
               }
            },
            {
               "name": "night-time",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "night-time"
               }
            }
         ],
         "things": [
            {
               "uName": "hklightaccessory:kitchen-lights",
               "displayName": "Kitchen Lights",
               "manufacturer": "Lightwave RF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "brightnessSupported": true,
               "propogateToParent": false,
               "propogateToChild": true,
               "props": [
                  {
                     "name": "room-state",
                     "type": "stateproperty",
                     "initialValue": "no-users-present-day",
                     "states": [
                        {
                           "name": "no-users-present-day",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-day",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "no-users-present-evening",
                           "actions": [{ "property": "brightness", "value": 20 }, { "property": "power", "value": true }]
                        },
                        {
                           "name": "users-present-evening",
                           "priority": 2,
                           "actions": [{ "property": "brightness", "value": 60 }, { "property": "power", "value": true }]
                        },
                        {
                           "name": "no-users-present-night",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-night",
                           "actions": [
                              { "property": "brightness", "value": 30 }, { "property": "power", "value": true }
                              //{ "guard": { "active": true, "property": "low-light" }, "property": "brightness", "value": 30 },
                              //{ "guard": { "active": true, "property": "low-light" }, "property": "power", "value": true },
                              //{ "guard": { "active": true, "property": "low-light", "value": false }, "property": "power", "value": false }
                           ]
                        },
                        {
                           "name": "no-users-present-dull-day",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-dull-day",
                           "actions": [{ "property": "brightness", "value": 60 }, { "property": "power", "value": true }]
                        }
                     ]
                  }
               ],
               "things": [
                  {
                     "uName": "hklightaccessory:kitchen-ceiling-lights",
                     "displayName": "Ceiling Lights - Kitchen",
                     "propogateToParent": false,
                     "propogateToChild": true,
                     "manufacturer": "Lightwave RF Ltd",
                     "model": "V0.1",
                     "serialNumber": "1234567890",
                     "brightnessSupported": true,
                     "props": [
                     ],
                     "things": [
                        {
                           "uName": "lightwaverfaccessory:kitchen-ceiling-lights",
                           "displayName": "Ceiling Lights - Kitchen",
                           "roomId": 2,
                           "deviceId": 2,
                           "brightnessSupported": true,
                           "propogateToParent": true,
                           "props": [
                           ]
                        }
                     ]
                  },
                  {
                     "uName": "hklightaccessory:kitchen-island-lights",
                     "displayName": "Island Lights - Kitchen",
                     "propogateToParent": false,
                     "propogateToChild": true,
                     "manufacturer": "Lightwave RF Ltd",
                     "model": "V0.1",
                     "serialNumber": "1234567890",
                     "brightnessSupported": true,
                     "props": [
                     ],
                     "things": [
                        {
                           "uName": "lightwaverfaccessory:kitchen-island-lights",
                           "displayName": "Island Lights - Kitchen",
                           "roomId": 2,
                           "deviceId": 1,
                           "brightnessSupported": true,
                           "propogateToParent": true,
                           "props": []
                        }
                     ]
                  },
                  {
                     "uName": "lightwaverfaccessory:kitchen-cupboards-lights",
                     "displayName": "Kitchen Cupboard Lights",
                     "roomId": 6,
                     "propogateToParent": false,
                     "moods": [
                        {
                           "name": "low",
                           "id": 1,
                           "low": 1,
                           "high": 33
                        },
                        {
                           "name": "medium",
                           "id": 2,
                           "low": 34,
                           "high": 76
                        },
                        {
                           "name": "full",
                           "id": 3,
                           "low": 77,
                           "high": 100
                        }
                     ],
                     "props": [
                     ]
                  }
               ]
            }
         ]
      },
      {
         "uName": "room:lounge",
         "displayName": "Lounge Room",
         "buildingName": "building:dumgoyne",
         "movementTimeout": 600,
         "props": [
            {
               "name": "movement",
               "initialValue": false,
               "writable": false,
               "type": "gpioproperty",
               "gpioPin": 27,
               "triggerLow": true,
               "local": true
            },
            {
               "name": "low-light",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "low-light"
               }
            },
            {
               "name": "security-lights",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "security-lights"
               }
            },
            {
               "name": "night-time",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "night-time"
               }
            }
         ],
         "things": [
            {
               "uName": "hklightaccessory:lounge-lights",
               "displayName": "Lounge Lights",
               "manufacturer": "Lounge Light Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "brightnessSupported": true,
               "propogateToParent": false,
               "propogateToChild": true,
               "props": [
                  {
                     "name": "alarm-state",
                     "type": "stateproperty",
                     "initialValue": "not-armed",
                     "states": [
                        {
                           "name": "DEFAULT",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "stay-armed-house-empty",
                           "priority": 5,
                           "actions": [
                              { "guard": { "active": true, "property": "security-lights" }, "property": "brightness", "value": 20 },
                              { "guard": { "active": true, "property": "security-lights" }, "property": "power", "value": true },
                              { "guard": { "active": true, "property": "security-lights", "value": false }, "property": "power", "value": false }
                           ]
                        },
                        {
                           "name": "stay-armed-animals-present",
                           "priority": 5,
                           "actions": [
                              { "guard": { "active": true, "property": "security-lights" }, "property": "brightness", "value": 20 },
                              { "guard": { "active": true, "property": "security-lights" }, "property": "power", "value": true },
                              { "guard": { "active": true, "property": "security-lights", "value": false }, "property": "power", "value": false }
                           ]
                        },
                        {
                           "name": "away-armed",
                           "priority": 5,
                           "actions": [
                              { "guard": { "active": true, "property": "security-lights" }, "property": "brightness", "value": 20 },
                              { "guard": { "active": true, "property": "security-lights" }, "property": "power", "value": true },
                              { "guard": { "active": true, "property": "security-lights", "value": false }, "property": "power", "value": false }
                           ]
                        },
                        {
                           "name": "zone-alarm",
                           "priority": 999,
                           "actions": [
                              { "guard": { "active": true, "property": "low-light" }, "property": "brightness", "value": 100 },
                              { "guard": { "active": true, "property": "low-light" }, "property": "power", "value": true },
                              { "guard": { "active": true, "property": "low-light", "value": false }, "property": "power", "value": false }
                           ]
                        },
                        {
                           "name": "fire-alarm",
                           "priority": 999,
                           "actions": [ { "property": "brightness", "value": 100 }, { "property": "power", "value": true } ]
                        }
                     ]
                  },
                  {
                     "name": "room-state",
                     "type": "stateproperty",
                     "initialValue": "no-users-present-day",
                     "states": [
                        {
                           "name": "no-users-present-day",
                           "priority": 1,
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-day",
                           "priority": 1,
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "no-users-present-evening",
                           "priority": 1,
                           "actions": [{ "property": "brightness", "value": 25 }, { "property": "power", "value": true }]
                        },
                        {
                           "name": "users-present-evening",
                           "priority": 2,
                           "actions": [{ "property": "brightness", "value": 60 }, { "property": "power", "value": true }]
                        },
                        {
                           "name": "no-users-present-night",
                           "priority": 1,
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-night",
                           "priority": 1,
                           "actions": [
                              { "property": "brightness", "value": 30 }, { "property": "power", "value": true }
                              //{ "guard": { "active": true, "property": "low-light" }, "property": "brightness", "value": 30 },
                              //{ "guard": { "active": true, "property": "low-light" }, "property": "power", "value": true },
                              //{ "guard": { "active": true, "property": "low-light", "value": false }, "property": "power", "value": false }
                           ]
                        },
                        {
                           "name": "no-users-present-dull-day",
                           "priority": 1,
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-dull-day",
                           "priority": 1,
                           "actions": [{ "property": "brightness", "value": 60 }, { "property": "power", "value": true }]
                        }
                     ]
                  }
               ],
               "things": [
                  {
                     "uName": "hklightaccessory:lounge-wall-lights",
                     "displayName": "Wall Lights - Lounge",
                     "propogateToParent": false,
                     "propogateToChild": true,
                     "manufacturer": "Lightwave RF Ltd",
                     "model": "V0.1",
                     "serialNumber": "1234567890",
                     "brightnessSupported": true,
                     "props": [],
                     "things": [
                        {
                           "uName": "lightwaverfaccessory:wall-lights",
                           "displayName": "Wall Lights - Lounge",
                           "roomId": 1,
                           "deviceId": 1,
                           "brightnessSupported": true,
                           "propogateToParent": true,
                           "props": [
                           ]
                        }
                     ]
                  },
                  {
                     "uName": "hklightaccessory:lounge-table-lamps",
                     "displayName": "Table Lamps - Lounge",
                     "propogateToParent": false,
                     "propogateToChild": true,
                     "manufacturer": "Lightwave RF Ltd",
                     "model": "V0.1",
                     "serialNumber": "1234567890",
                     "props": [
                     ],
                     "things": [
                        {
                           "uName": "lightwaverfaccessory:table-lamps",
                           "displayName": "Table Lamps - Lounge",
                           "roomId": 1,
                           "deviceId": 2,
                           "propogateToParent": true,
                           "props": []
                        },
                        {
                           "uName": "huelight:tv-table-lamp",
                           "displayName": "TV Lamp - Lounge",
                           "deviceId": 4,
                           "hueSupported": true,
                           "saturationSupported": true,
                           "propogateToParent": true,
                           "props": [
                              {
                                 "name": "hue",
                                 "initialValue": 44,
                                 "writable": false,
                                 "type": "property"
                              },
                              {
                                 "name": "saturation",
                                 "initialValue": 69,
                                 "writable": false,
                                 "type": "property"
                              }
                           ]
                        }
                     ]
                  }
               ]
            },
            {
               "uName": "hkspeakeraccessory:lounge-speakers",
               "displayName": "Lounge Speakers",
               "manufacturer": "Lounge Speaker Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "volumeSupported": true,
               "props": [
               ],
               "things": [
                  {
                     "uName": "sonosplayer:living-room",
                     "displayName": "Sonos Player for Living Room",
                     "zone": "Living Room",
                     "propogateToParent": true,
                     "props": [
                        {
                           "name": "alarm-state",
                           "type": "stateproperty",
                           "states": [
                              {
                                 "name": "stay-armed-house-empty",
                                 "action": { "property": "playing", "value": false }
                              },
                              {
                                 "name": "stay-armed-animals-present",
                                 "action": { "property": "playing", "value": false }
                              },
                              {
                                 "name": "away-armed",
                                 "action": { "property": "playing", "value": false }
                              }
                           ]
                        }
                     ]
                  }
               ]
            }
         ]
      },
      {
         "uName": "room:outside-rear-garden-south",
         "displayName": "Outside Backdoor and Rear Garden South",
         "buildingName": "building:dumgoyne",
         "movementTimeout": 60,
         "props": [
            {
               "name": "movement",
               "initialValue": false,
               "writable": false,
               "type": "gpioproperty",
               "gpioPin": 25,
               "triggerLow": true,
               "local": true
            },
            {
               "name": "low-light",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "dark"
               }
            },
            {
               "name": "night-time",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "night-time"
               }
            }
         ],
         "things": [
            {
               "uName": "hklightaccessory:rear-garden-outside-lights",
               "displayName": "Rear Garden South Outside Lights",
               "manufacturer": "LightwaveRF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "brightnessSupported": true,
               "propogateToParent": true,
               "props": [
                  {
                     "name": "room-state",
                     "type": "stateproperty",
                     "states": [
                        {
                           "name": "no-users-present-day",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-day",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "no-users-present-evening",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-evening",
                           "priority": 2,
                           "actions": [{ "property": "brightness", "value": 100 }, { "property": "power", "value": true }]
                        },
                        {
                           "name": "no-users-present-night",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-night",
                           "actions": [
                              { "property": "brightness", "value": 100 }, { "property": "power", "value": true }
                              //{ "guard": { "active": true, "property": "low-light" }, "property": "brightness", "value": 100 },
                              //{ "guard": { "active": true, "property": "low-light" }, "property": "power", "value": true },
                              //{ "guard": { "active": true, "property": "low-light", "value": false }, "property": "power", "value": false }
                           ]
                        },
                        {
                           "name": "no-users-present-dull-day",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-dull-day",
                           "actions": [{ "property": "brightness", "value": 60 }, { "property": "power", "value": true }]
                        }
                     ]
                  }
               ],
               "things": [
                  {
                     "uName": "lightwaverfaccessory:back-door-outside-light",
                     "displayName": "Back Door Outside Light",
                     "roomId": 3,
                     "deviceId": 1,
                     "brightnessSupported": true,
                     "propogateToParent": true,
                     "props": [
                     ]
                  },
                  {
                     "uName": "lightwaverfaccessory:bifold-outside-light",
                     "displayName": "Bifold Outside Light",
                     "roomId": 3,
                     "deviceId": 2,
                     "brightnessSupported": true,
                     "propogateToParent": true,
                     "props": [
                     ]
                  },
                  {
                     "uName": "lightwaverfaccessory:lounge-outside-light",
                     "displayName": "Lounge Outside Light",
                     "roomId": 3,
                     "deviceId": 3,
                     "brightnessSupported": true,
                     "propogateToParent": true,
                     "props": [
                     ]
                  }
               ]
            }
         ]
      },
      {
         "uName": "room:downstairs-loo",
         "displayName": "Downstairs Loo",
         "buildingName": "building:dumgoyne",
         "movementTimeout": 300,
         "props": [
            {
               "name": "movement",
               "initialValue": false,
               "writable": false,
               "type": "gpioproperty",
               "gpioPin": 8,
               "triggerLow": true
            },
            {
               "name": "low-light",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "low-light"
               }
            },
            {
               "name": "night-time",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "night-time"
               }
            }
         ],
         "things": [
            {
               "uName": "hklightaccessory:loo-main-light",
               "displayName": "Loo Light",
               "manufacturer": "LightwaveRF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "brightnessSupported": true,
               "propogateToParent": true,
               "props": [
                  {
                     "name": "room-state",
                     "type": "stateproperty",
                     "states": [
                        {  
                           "name": "no-users-present-day",
                           "actions": [ { "property": "power", "value": false } ]
                        }, 
                        {  
                           "name": "users-present-day",
                           "actions": [ { "property": "brightness", "value": 40 }, { "property": "power", "value": true } ]
                        }, 
                        {  
                           "name": "no-users-present-evening", 
                           "actions": [ { "property": "power", "value": false } ]
                        }, 
                        {  
                           "name": "users-present-evening",
                           "actions": [ { "property": "brightness", "value": 60 }, { "property": "power", "value": true } ]
                        }, 
                        {  
                           "name": "no-users-present-night",
                           "actions": [ { "property": "power", "value": false } ]
                        }, 
                        {  
                           "name": "users-present-night",
                           "actions": [ { "property": "brightness", "value": 50 }, { "property": "power", "value": true } ]
                        },
                        {
                           "name": "no-users-present-dull-day",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-dull-day",
                           "actions": [{ "property": "brightness", "value": 60 }, { "property": "power", "value": true }]
                        }
                     ]
                  }
               ],
               "things": [
                  {
                     "uName": "lightwaverfaccessory:loo-main-light",
                     "displayName": "Loo Lights",
                     "roomId": 4,
                     "deviceId": 2,
                     "brightnessSupported": true,
                     "propogateToParent": true,
                     "props": [
                     ]
                  }
               ]
            }
         ]
      },
      {
         "uName": "room:snug",
         "displayName": "Snug and Music Room",
         "buildingName": "building:dumgoyne",
         "movementTimeout": 600,
         "props": [
            {
               "name": "movement",
               "initialValue": false,
               "writable": false,
               "type": "gpioproperty",
               "gpioPin": 24,
               "triggerLow": true
            },
            {
               "name": "low-light",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "low-light"
               }
            },
            {
               "name": "night-time",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "night-time"
               }
            }
         ],
         "things": [
            {
               "uName": "hklightaccessory:snug-main-light",
               "displayName": "Snug Light",
               "manufacturer": "LightwaveRF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "brightnessSupported": true,
               "propogateToParent": true,
               "props": [
                  {
                     "name": "room-state",
                     "type": "stateproperty",
                     "states": [
                        {  
                           "name": "no-users-present-day",
                           "actions": [ { "property": "power", "value": false } ]
                        }, 
                        {  
                           "name": "users-present-day",
                           "actions": [ { "property": "power", "value": false } ]
                        }, 
                        {  
                           "name": "no-users-present-evening", 
                           "actions": [ { "property": "power", "value": false } ]
                        }, 
                        {  
                           "name": "users-present-evening",
                           "actions": [ { "property": "brightness", "value": 60 }, { "property": "power", "value": true } ]
                        }, 
                        {  
                           "name": "no-users-present-night",
                           "actions": [ { "property": "power", "value": false } ]
                        }, 
                        {  
                           "name": "users-present-night",
                           "actions": [
                              { "property": "brightness", "value": 30 }, { "property": "power", "value": true }
                              //{ "guard": { "active": true, "property": "low-light" }, "property": "brightness", "value": 30 },
                              //{ "guard": { "active": true, "property": "low-light" }, "property": "power", "value": true },
                              //{ "guard": { "active": true, "property": "low-light", "value": false }, "property": "power", "value": false }
                           ]
                        },
                        {
                           "name": "no-users-present-dull-day",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-dull-day",
                           "actions": [{ "property": "brightness", "value": 60 }, { "property": "power", "value": true }]
                        }
                     ]
                  }
               ],
               "things": [
                  {
                     "uName": "lightwaverfaccessory:snug-main-light",
                     "displayName": "Snug Lights",
                     "roomId": 4,
                     "deviceId": 3,
                     "brightnessSupported": true,
                     "propogateToParent": true,
                     "props": [
                     ]
                  }
               ]
            }
         ]
      },
      {
         "uName": "room:utility-room",
         "displayName": "Utility Room",
         "buildingName": "building:dumgoyne",
         "movementTimeout": 120,
         "props": [
            {
               "name": "movement",
               "initialValue": false,
               "writable": false,
               "type": "gpioproperty",
               "gpioPin": 22,
               "triggerLow": true
            },
            {
               "name": "low-light",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "low-light"
               }
            },
            {
               "name": "night-time",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "night-time"
               }
            }
         ],
         "things": [
            {
               "uName": "hklightaccessory:utility-lights",
               "displayName": "Utility Lights",
               "manufacturer": "LightwaveRF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "brightnessSupported": true,
               "propogateToParent": true,
               "props": [
                  {
                     "name": "room-state",
                     "type": "stateproperty",
                     "states": [
                        {  
                           "name": "no-users-present-day",
                           "actions": [ { "property": "power", "value": false } ]
                        }, 
                        {  
                           "name": "users-present-day",
                           "actions": [ { "property": "power", "value": false } ]
                        }, 
                        {  
                           "name": "no-users-present-evening", 
                           "actions": [ { "property": "power", "value": false } ]
                        }, 
                        {  
                           "name": "users-present-evening",
                           "actions": [ { "property": "brightness", "value": 60 }, { "property": "power", "value": true } ]
                        }, 
                        {  
                           "name": "no-users-present-night",
                           "actions": [ { "property": "power", "value": false } ]
                        }, 
                        {  
                           "name": "users-present-night",
                           "actions": [
                              { "property": "brightness", "value": 30 }, { "property": "power", "value": true }
                              //{ "guard": { "active": true, "property": "low-light" }, "property": "brightness", "value": 30 },
                              //{ "guard": { "active": true, "property": "low-light" }, "property": "power", "value": true },
                              //{ "guard": { "active": true, "property": "low-light", "value": false }, "property": "power", "value": false }
                           ]
                        },
                        {
                           "name": "no-users-present-dull-day",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-dull-day",
                           "actions": [{ "property": "brightness", "value": 60 }, { "property": "power", "value": true }]
                        }
                     ]
                  }
               ],
               "things": [
                  {
                     "uName": "lightwaverfaccessory:utility-main-light",
                     "displayName": "Utility Light",
                     "roomId": 2,
                     "deviceId": 3,
                     "brightnessSupported": true,
                     "propogateToParent": true,
                     "props": [
                     ]
                  }
               ]
            }
         ]
      },
      {
         "uName": "room:landing",
         "displayName": "Landing",
         "buildingName": "building:dumgoyne",
         "props": [
            {
               "name": "movement",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "thing:land-gpio",
                  "property": "landing-movement"
               }
            },
            {
               "name": "low-light",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "low-light"
               }
            },
            {
               "name": "night-time",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "night-time"
               }
            }
         ],
         "things": [
            {
               "uName": "hklightaccessory:landing-main-light",
               "displayName": "Landing Main Light",
               "manufacturer": "LightwaveRF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "brightnessSupported": true,
               "propogateToParent": false,
               "propogateToChild": true,
               "props": [
                  {
                     "name": "room-state",
                     "type": "stateproperty",
                     "initialValue": "no-users-present-day",
                     "states": [
                        {
                           "name": "DEFAULT",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-evening",
                           "actions": [{ "property": "brightness", "value": 60 }, { "property": "power", "value": true }]
                        },
                        {
                           "name": "users-present-dull-day",
                           "actions": [{ "property": "brightness", "value": 60 }, { "property": "power", "value": true }]
                        }
                     ]
                  }
               ],
               "things": [
                  {
                     "uName": "lightwaverfaccessory:landing-main-light",
                     "displayName": "Landing Main Light",
                     "roomId": 4,
                     "deviceId": 4,
                     "brightnessSupported": true,
                     "propogateToParent": true,
                     "props": [
                     ]
                  }
               ]
            }
         ]
      },
      {
         "uName": "room:hall",
         "displayName": "Hall",
         "buildingName": "building:dumgoyne",
         "movementTimeout": 120,
         "props": [
            {
               "name": "movement",
               "initialValue": false,
               "writable": false,
               "type": "gpioproperty",
               "gpioPin": 18,
               "triggerLow": true
            },
            {
               "name": "low-light",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "low-light"
               }
            },
            {
               "name": "night-time",
               "initialValue": false,
               "writable": false,
               "source": {
                  "uName": "building:dumgoyne",
                  "property": "night-time"
               }
            }
         ],
         "things": [
            {
               "uName": "hklightaccessory:hall-table-lamp",
               "displayName": "Hall Table Lamp",
               "manufacturer": "LightwaveRF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "propogateToParent": false,
               "props": [
                  {
                     "name": "room-state",
                     "type": "stateproperty",
                     "states": [
                        {
                           "name": "no-users-present-day",
                           "actions": [ { "property": "power", "value": false } ]
                        },
                        {
                           "name": "users-present-day",
                           "actions": [ { "property": "power", "value": false } ]
                        },
                        {
                           "name": "no-users-present-evening",
                           "actions": [ { "property": "power", "value": true } ]
                        },
                        {
                           "name": "users-present-evening",
                           "actions": [ { "property": "power", "value": true } ]
                        },
                        {
                           "name": "no-users-present-night",
                           "actions": [ { "property": "power", "value": false } ]
                        },
                        {
                           "name": "users-present-night",
                           "actions": [
                              { "property": "power", "value": true }
                              //{ "guard": { "active": true, "property": "low-light" }, "property": "power", "value": true },
                              //{ "guard": { "active": true, "property": "low-light", "value": false }, "property": "power", "value": false }
                           ]
                        },
                        {
                           "name": "no-users-present-dull-day",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-dull-day",
                           "actions": [{ "property": "power", "value": true }]
                        }
                     ]
                  }
               ],
               "things": [
                  {
                     "uName": "lightwaverfaccessory:hall-table-lamp",
                     "displayName": "Hall Table Lamp",
                     "roomId": 4,
                     "deviceId": 1,
                     "propogateToParent": true,
                     "props": [
                     ]
                  }
               ]
            },
            {
               "uName": "hklightaccessory:hall-downlighters",
               "displayName": "Hall Downlighters",
               "manufacturer": "LightwaveRF Ltd",
               "model": "V0.1",
               "serialNumber": "1234567890",
               "brightnessSupported": true,
               "propogateToParent": false,
               "props": [
                  {
                     "name": "room-state",
                     "type": "stateproperty",
                     "states": [
                        {
                           "name": "no-users-present-day",
                           "actions": [ { "property": "power", "value": false } ]
                        },
                        {
                           "name": "users-present-day",
                           "actions": [ { "property": "power", "value": false } ]
                        },
                        {
                           "name": "no-users-present-evening",
                           "actions": [ { "property": "brightness", "value": 20 }, { "property": "power", "value": true } ]
                        },
                        {
                           "name": "users-present-evening",
                           "actions": [ { "property": "brightness", "value": 60 }, { "property": "power", "value": true } ]
                        },
                        {
                           "name": "no-users-present-night",
                           "actions": [ { "property": "power", "value": false } ]
                        },
                        {
                           "name": "users-present-night",
                           "actions": [ { "property": "power", "value": false } ]
                        },
                        {
                           "name": "no-users-present-dull-day",
                           "actions": [ { "property": "power", "value": false } ]
                        },
                        {
                           "name": "users-present-dull-day",
                           "actions": [ { "property": "brightness", "value": 60 }, { "property": "power", "value": true } ]
                        }
                     ]
                  }
               ],
               "things": [
                  {
                     "uName": "lightwaverfaccessory:hall-downlighters",
                     "displayName": "Hall Downlighters",
                     "roomId": 4,
                     "deviceId": 5,
                     "brightnessSupported": true,
                     "propogateToParent": true,
                     "props": [
                     ]
                  }
               ]
            }
         ]
      },
      {
         "uName": "thing:pushover-messenger",
         "displayName": "Pushover Messenger",
         "props": [
            {
               "name": "priority-message",
               "type": "pushoverproperty",
               "initialValue": false,
               "writable": false,
               "priority": 2,
               "userGroup": "usergroup:key-holders",
               "sources": [
                  {
                     "uName": "building:dumgoyne",
                     "property": "tamper-alarm",
                     "transformMap": {
                        "true": "Alarm being tampered with!",
                        "false": "Alarm no longer in tamper mode"
                     }
                  },
                  {
                     "uName": "building:dumgoyne",
                     "property": "fire-alarm",
                     "transformMap": {
                        "true": "Fire Alarm!",
                        "false": "Fire alarm reset"
                     }
                  },
                  {
                     "uName": "building:dumgoyne",
                     "property": "zone-alarm",
                     "transformMap": {
                        "true": "Alarm triggered",
                        "false": "Alarm trigger reset"
                     }
                  },
                  {
                     "uName": "building:dumgoyne",
                     "property": "confirmed-alarm",
                     "transformMap": {
                        "true": "Alarm confirmed - call police!",
                        "false": "Confirmed alarm reset"
                     }
                  }
               ]
            },
            {
               "name": "urgent-message",
               "type": "pushoverproperty",
               "initialValue": false,
               "writable": false,
               "priority": 1,
               "userGroup": "usergroup:admins",
               "sources": [
                  {
                     "uName": "building:dumgoyne",
                     "property": "alarm-error"
                  },
                  {
                     "uName": "casa:land",
                     "property": "ACTIVE",
                     "transformMap": {
                        "true": "Casa 'land' is active",
                        "false": "Casa 'land' has gone down!"
                     }
                  }
               ]
            },
            {
               "name": "normal-message",
               "type": "pushoverproperty",
               "initialValue": false,
               "writable": false,
               "priority": 0,
               "userGroup": "usergroup:admins",
               "sources": [
                  {
                     "uName": "building:dumgoyne",
                     "property": "away-armed",
                     "transformMap": {
                        "true": "Alarm fully armed - House empty",
                        "false": "Alarm disarmed"
                     }
                  },
                  {
                     "uName": "building:dumgoyne",
                     "property": "stay-armed",
                     "transformMap": {
                        "true": "Alarm armed - Doggies at home",
                        "false": "Alarm disarmed"
                     }
                  },
                  {
                     "uName": "building:dumgoyne",
                     "property": "night-armed",
                     "transformMap": {
                        "true": "Alarm armed - Family at home",
                        "false": "Alarm disarmed"
                     }
                  },
                  {
                     "uName": "building:dumgoyne",
                     "property": "low-light",
                     "transformMap": {
                        "true": "Lights movement sensitive",
                        "false": "Lights ignoring movement"
                     }
                  },
                  {
                     "uName": "building:dumgoyne",
                     "property": "alarm-state"
                  },
                  {
                     "uName": "thing:dumgoyne-broadband",
                     "property": "test-result"
                  }
               ]
            }
         ]
      }
   ]
}

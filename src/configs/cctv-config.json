{
   "name": "casa:cctv",
   "displayName": "Casa Collin CCTV System",
   "gang": "casa-collin-v2",
   "parentCasa": {
      "name": "casa:internet",
      "address": {
         "hostname": "localhost",
         "port": 8096
      }
   },
   "listeningPort": 8082,
   "props": {},
   "services": [
      {
         "name": "sonosservice"
      },
      {
         "name": "webservice",
         "port": 11001,
         "mediaPath": "/Users/richardcollin/personal/media",
         "secure": false,
         "serverKey": "",
         "serverCert": "",
         "caCert": ""
      },
      {  
         "name": "lightwaverfservice",
         "displayName": "LightwaveRF Link Service",
         "linkAddress": "192.168.1.236"
      }
   ],
   "scenes": [
      {
         "name": "scene:on-holiday",
         "displayName": "On Holiday Scene",
         "props": [
            {
               "name": "ACTIVE",
               "type": "scheduleproperty",
               "initialValue": false,
               "writable": false,
               "events": [
                  {
                     "rule": "0,5,10,15,20,25,30,35,40,45,50,55 * * * *",
                     "value": true
                  },
                  {
                     "rule": "4,9,14,19,24,29,34,39,44,49,54,59 * * * *",
                     "value": false
                  }
               ]
            }
         ],
         "sources": [
            {
               "name": "thing:test-cctv",
               "property": "test-prop-1",
               "value": true
            }
         ]
      }
   ],
   "things": [
      {
         "name": "lightwaverfaccessory:kitchen-ceiling-lights",
         "displayName": "Ceiling Lights - Kitchen",
         "roomID": 2,
         "deviceID": 2,
         "brightnessSupported": true,
         "props": [
            {
               "name": "test-lightwave-state",
               "type": "stateproperty",
               "initialValue": "off",
               "states": [
                  {
                     "name": "off",
                     "timeout": {
                        "duration": 1,
                        "nextState": "on"
                     },
                     "targets": [
                        {
                           "property": "brightness",
                           "value": 0
                        },
                        {
                           "property": "power",
                           "value": false
                        }
                     ]
                  },
                  {
                     "name": "on",
                     "targets": [
                        {
                           "property": "brightness",
                           "ramp": {
                              "startValue": 50,
                              "endValue": 100,
                              "step": 5,
                              "duration": 5
                           }
                        },
                        {
                           "property": "power",
                           "value": true
                        }
                     ],
                     "source": {
                        "property": "brightness",
                        "value": 100,
                        "nextState": "off"
                     }
                  }
               ]
            }
         ]
      },
      {
         "name": "thing:test-state-with-boolean-names",
         "props": [
            {
               "name": "boolean-state",
               "type": "stateproperty",
               "initialValue": false,
               "states": [
                  {
                     "name": false,
                     "timeout": {
                        "duration": 30,
                        "nextState": true
                     }
                  },
                  {
                     "name": true,
                     "timeout": {
                        "duration": 30,
                        "nextState": false
                     }
                  }
               ]
            }
         ]
      },
      {
         "name": "thing:dumgoyne-broadband",
         "displayName": "Internet Connection",
         "things": [
            {
               "name": "broadbandspeedtester:speed-tester",
               "maxTime": 5000,
               "schedule": "39 12 * * *"
            }
         ]
      },
      {
         "name": "sonosplayer:living-room",
         "displayName": "Sonos Player for Living Room",
         "zone": "Living Room",
         "fireAlarmRepeatTime": 5000,
         "fireAlarmVolume": 65,
         "fireAlarmUrl": "http://192.168.1.65:11001/siren_or_alarm.mp3",
         "props": [
            {
               "name": "afire-alarm",
               "initialValue": false,
               "writable": false,
               "source": {
                  "name": "thing:test-cctv",
                  "property": "test-prop-2"
               }
            }
         ]
      },
      {
         "name": "sonosplayer:dylan-bedroom-room",
         "zone": "Dylan's Room"
      },
      {
         "name": "thing:home-daylight-sensor",
         "displayName": "Home daylight sensor",
         "props": [
            {
               "name": "lightLevel",
               "type": "orproperty",
               "initialValue": 100,
               "writable": false,
               "source": {
                  "name": "thing:test-cctv",
                  "property": "test-prop-2",
                  "outputValues": {
                     "true": 30,
                     "false": 100
                  }
               }
            }
         ]
      },
      {
         "name": "thing:test-daylight-sensor",
         "displayName": "Test daylight sensor",
         "props": [
            {
               "name": "test-state-property",
               "initialValue": 0
            },
            {
               "name": "test-always-true",
               "initialValue": true
            },
            {
               "name": "test-always-false",
               "initialValue": false
            },
            {
               "name": "MODE",
               "type": "stateproperty",
               "initialValue": "auto",
               "states": [
                  {
                     "name": "auto",
                     "priority": -1,
                     "timeout": {
                        "duration": 35,
                        "nextState": "manual"
                     }
                  },
                  {
                    "name": "manual",
                     "priority": 999999,
                     "timeout": {
                        "duration": 35,
                        "nextState": "auto"
                     }
                  }
               ]
            },
            {
               "name": "state-test",
               "type": "stateproperty",
               "initialValue": "idle",
               "states": [
                  {
                     "name": "idle",
                     "timeout": {
                        "duration": 30,
                        "nextState": "test-timeout"
                     }
                  },
                  {
                     "name": "test-timeout",
                     "sources": [
                        {
                           "property": "test-always-true",
                           "value": false,
                           "nextState": "test-failed"
                        },
                        {
                           "property": "test-state-property",
                           "value": 50,
                           "nextState": "test-immediate-next-state"
                        }
                     ],
                     "target": {
                        "property": "test-state-property",
                        "ramp": {
                           "endValue": 50,
                           "step": 5,
                           "duration": 5
                        }
                     }
                  },
                  {
                     "name": "test-immediate-next-state",
                     "sources": [
                        {
                           "property": "test-state-property",
                           "value": 0,
                           "nextState": "idle"
                        },
                        {
                           "property": "test-always-true",
                           "value": true,
                           "nextState": "test-limit"
                        }
                     ]
                  },
                  {
                     "name": "test-limit",
                     "sources": [
                        {
                           "property": "test-state-property",
                           "value": 0,
                           "nextState": "idle"
                        }
                     ],
                     "target": {
                        "property": "test-state-property",
                        "ramp": {
                           "endValue": 0,
                           "step": -5,
                           "duration": 5
                        }
                     }
                  },
                  {
                     "name": "test-schedule",
                     "schedules": [
                        {
                           "name": "test-schedule",
                           "rule": "4,9,14,19,24,29,34,39,44,49,54,59 * * * *"
                        }
                     ],
                     "timeout": {
                        "duration": 10,
                        "nextState": "PREVIOUS-STATE"
                     }
                  }
               ]
            },
            {
               "name": "test-smooth-transform",
               "type": "smootherproperty",
               "initialValue": 0,
               "writable": false,
               "rate": 10,
               "resolution": 5,
               "source": {
                  "name": "thing:home-daylight-sensor",
                  "property": "lightLevel"
               }
            },
            {
               "name": "alarm-status",
               "type": "orproperty",
               "initialValue": "white",
               "writable": false,
               "prioritiseSources": true,
               "sources": [
                  {
                     "name": "thing:test-cctv",
                     "property": "test-prop-1",
                     "outputValues": {
                        "true": "green",
                        "false": "white"
                     }
                  },
                  {
                     "name": "thing:home-daylight-sensor",
                     "property": "lightLevel",
                     "transform": "$value<50",
                     "outputValues": {
                        "true": "red",
                        "false": "blue"
                     }
                  }
               ]
            },
            {
               "name": "smallerLightLevel",
               "type": "lineartransformproperty",
               "initialValue": 0,
               "writable": false,
               "inputMin": 0,
               "inputMax": 100,
               "outputMin": 10,
               "outputMax": 0,
               "source": {
                  "name": "thing:home-daylight-sensor",
                  "property": "lightLevel"
               }
            },
            {
               "name": "daylight",
               "type": "scheduleproperty",
               "initialValue": false,
               "writable": false,
               "events": [
                  {
                     "rule": "sunrise",
                     "value": true
                  },
                  {
                     "rule": "sunset:-1800",
                     "value": false
                  }
               ]
            },
            {
               "name": "dark",
               "type": "scheduleproperty",
               "initialValue": false,
               "writable": false,
               "events": [
                  {
                     "rule": "sunrise",
                     "value": false
                  },
                  {
                     "rule": "sunset:-1800",
                     "value": true
                  }
               ]
            },
            {
               "name": "test-source-transform-map",
               "initialValue": false,
               "writable": false,
               "source": {
                  "name": "thing:test-cctv",
                  "property": "test-prop-2",
                  "transformMap": {
                     "true": "test-prop-2 is True!",
                     "false": "test-prop-2 is False!"
                  }
               }
            }
         ]
      },
      {
         "name": "thing:test-cctv",
         "displayName": "Test CCTV Config",
         "props": [
            {
               "name": "test-prop-1",
               "type": "scheduleproperty",
               "initialValue": false,
               "writable": false,
               "events": [
                  {
                     "rule": "1,6,11,16,21,26,31,36,41,46,51,56 * * * *",
                     "value": true
                  },
                  {
                     "rule": "3,8,13,18,23,28,33,38,43,48,53,58 * * * *",
                     "value": false
                  }
               ]
            },
            {
               "name": "test-prop-2",
               "type": "scheduleproperty",
               "initialValue": false,
               "writable": false,
               "events": [
                  {
                     "rule": "0,5,10,15,20,25,30,35,40,45,50,55 * * * *",
                     "value": true
                  },
                  {
                     "rule": "2,7,12,17,22,27,32,37,42,47,52,57 * * * *",
                     "value": false
                  }
               ]
            },
            {
               "name": "test-prop-3",
               "type": "scheduleproperty",
               "initialValue": false,
               "writable": false,
               "events": [
                  {
                     "rule": "0,5,10,15,20,25,30,35,40,45,50,55 * * * *",
                     "value": true
                  },
                  {
                     "rule": "3,8,13,18,23,28,33,38,43,48,53,58 * * * *",
                     "value": false
                  }
               ]
            },
            {
               "name": "test-prop-4",
               "type": "scheduleproperty",
               "initialValue": false,
               "writable": false,
               "events": [
                  {
                     "rule": "0,20,40 * * * *",
                     "value": true
                  },
                  {
                     "rule": "10,30,50 * * * *",
                     "value": false
                  }
               ]
            },
            {
               "name": "latching-test-prop-2",
               "type": "latchproperty",
               "initialValue": false,
               "writable": false,
               "source": {
                  "name": "thing:test-cctv",
                  "property": "test-prop-2"
               },
               "controller": {
                  "name": "thing:test-cctv",
                  "property": "test-prop-3"
               }
            },
            {
               "name": "test-schedule-ramp",
               "type": "scheduleproperty",
               "initialValue": false,
               "writable": false,
               "events": [
                  {
                     "rule": "0,5,10,15,20,25,30,35,40,45,50,55 * * * *",
                     "ramp": {
                        "startValue": 0,
                        "endValue": 100,
                        "step": 2,
                        "duration": 10
                     }
                  },
                  {
                     "rule": "3,8,13,18,23,28,33,38,43,48,53,58 * * * *",
                     "ramp": {
                        "endValue": 0,
                        "step": -2,
                        "duration": 25
                     }
                  }
               ]
            },
            {
               "name": "test-property-broken",
               "initialValue": false,
               "writable": false,
               "source": {
                  "name": "propertyactivator:test-source-not-found",
                  "property": "test-prop-not-found"
               }
            }
         ]
      },
      {
         "name": "thing:dumgoyne-environment",
         "displayName": "Environment Based on Sensors in Dumgoyne",
         "props": [
            {
               "name": "daylight-sensor",
               "initialValue": false,
               "writable": false
            },
            {
               "name": "daylight-possible",
               "initialValue": false,
               "writable": false,
               "type": "scheduleproperty",
               "events": [
                  {
                     "rule": "sunrise:-600",
                     "value": true
                  },
                  {
                     "rule": "sunset:+600",
                     "value": false
                  }
               ]
            },
            {
               "name": "daylight",
               "initialValue": false,
               "writable": false,
               "type": "andproperty",
               "sources": [
                  {
                     "name": "thing:dumgoyne-environment",
                     "property": "daylight-sensor"
                  },
                  {
                     "name": "thing:dumgoyne-environment",
                     "property": "daylight-possible"
                  }
               ]
            },
            {
               "name": "low-light",
               "initialValue": false,
               "writable": false
            },
            {
               "name": "background-lights",
               "initialValue": false,
               "writable": true,
               "type": "scheduleproperty",
               "source": {
                  "name": "thing:dumgoyne-environment",
                  "property": "daylight",
                  "transform": "!$value"
               },
               "events": [
                  {
                     "rule": "30 22 * * *",
                     "value": false
                  }
               ]
            },
            {
               "name": "richard-at-home",
               "initialValue": false,
               "writable": false
            }
         ]
      },
      {
         "name": "thing:test-composite",
         "props": [
            {
               "name": "top-level-prop",
               "initialValue": false
            },
            {
               "name": "all-prop",
               "initialValue": false,
               "source": {
                  "name": "thing:test-cctv",
                  "property": "test-prop-2"
               }
            }
         ],
         "things": [
            {
               "name": "thing:test-comp-level-1-1",
               "props": [
                  {
                     "name": "only-lower-levels-prop",
                     "initialValue": false
                  },
                  {
                     "name": "all-prop",
                     "initialValue": false
                  }
               ],
               "things": [
                  {
                     "name": "thing:test-comp-level-2-1",
                     "props": [
                        {
                           "name": "only-lower-levels-prop",
                           "initialValue": false
                        },
                        {
                           "name": "all-prop",
                           "initialValue": false
                        },
                        {
                           "name": "only-level-2",
                           "initialValue": false,
                           "source": {
                              "name": "thing:test-cctv",
                              "property": "test-prop-1"
                           }
                        }
                     ]
                  }
               ]
            },
            {
               "name": "thing:test-comp-level-1-2",
               "props": [
                  {
                     "name": "only-lower-levels-prop",
                     "initialValue": false
                  },
                  {
                     "name": "all-prop",
                     "initialValue": false
                  }
               ]
            }
         ]
      }
   ]
}

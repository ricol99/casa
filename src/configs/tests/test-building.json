{
   "casa": {
      "uName": "casa:test-building",
      "displayName": "Casa Collin Test Building",
      "gang": "gang:collin-test",
      "listeningPort": 8087
   },
   "services": [],
   "scenes": [],
   "things": [
      {
         "uName": "tester:building",
         "displayName": "Test thing:building with three users and two bedrooms",
         "sources": [
            { "uName": "building:test", "property": "test-1-user-state" },
            { "uName": "building:test", "property": "test-2-user-state" },
            { "uName": "building:test", "property": "test-3-user-state" },
            { "uName": "building:test", "property": "all-users-away" },
            { "uName": "building:test", "property": "all-users-in-bed" },
            { "uName": "building:test", "property": "some-users-in-bed" },
            { "uName": "building:test", "property": "users-state" },
            { "uName": "building:test", "property": "night-time" },
            { "uName": "building:test", "property": "alarm-state" },
            { "uName": "building:test", "property": "movement" }
         ],
         "testCases": [
            {
               "name": "1) Normal - Fire alarm in all states",
               "driveSequence": [
                  { "wait": 3.0, "property": "fire-alarm", "value": true },
                  { "wait": 0.5, "property": "fire-alarm", "value": false },
                  { "wait": 0.5, "property": "stay-armed", "value": true },
                  { "wait": 0.5, "property": "fire-alarm", "value": true },
                  { "wait": 0.5, "property": "fire-alarm", "value": false },
                  { "wait": 1, "target": "bedroom:test-1", "property": "movement", "value": true },
                  { "wait": 0.5, "property": "fire-alarm", "value": true },
                  { "wait": 2, "target": "bedroom:test-1", "property": "movement", "value": false },
                  { "wait": 0.5, "property": "fire-alarm", "value": false },
                  { "wait": 0.5, "property": "stay-armed", "value": false },
                  { "wait": 3, "property": "test-1-present", "value": true },
                  { "wait": 0.5, "property": "test-2-present", "value": true },
                  { "wait": 0.5, "property": "test-3-present", "value": true },
                  { "wait": 0.5, "property": "stay-armed", "value": true },
                  { "wait": 3.5, "property": "fire-alarm", "value": true },
                  { "wait": 0.5, "property": "fire-alarm", "value": false },
                  { "wait": 3.5, "property": "zone-alarm", "value": "true" },
                  { "wait": 0.5, "property": "fire-alarm", "value": true },
                  { "wait": 0.5, "property": "fire-alarm", "value": false },
                  { "wait": 0.5, "property": "zone-alarm", "value": "false" },
                  { "wait": 0.5, "property": "stay-armed", "value": false },
                  { "wait": 1, "property": "test-1-present", "value": false },
                  { "wait": 0.5, "property": "test-2-present", "value": false },
                  { "wait": 0.5, "property": "test-3-present", "value": false }
               ],
               "expectedSequence": [
                  { "source": "building:test", "property": "users-state", "value": "empty" },
                  { "source": "building:test", "property": "alarm-state", "value": "fire-alarm" },
                  { "source": "building:test", "property": "alarm-state", "value": "not-armed" },
                  { "source": "building:test", "property": "alarm-state", "value": "stay-armed-house-empty" },
                  { "source": "building:test", "property": "alarm-state", "value": "fire-alarm" },
                  { "source": "building:test", "property": "alarm-state", "value": "stay-armed-house-empty" },
                  { "source": "building:test", "property": "movement", "value": true },
                  { "source": "building:test", "property": "alarm-state", "value": "stay-armed-animals-present" },
                  { "source": "building:test", "property": "alarm-state", "value": "fire-alarm" },
                  { "source": "building:test", "property": "movement", "value": false },
                  { "source": "building:test", "property": "alarm-state", "value": "stay-armed-house-empty" },
                  { "source": "building:test", "property": "alarm-state", "value": "not-armed" },
                  { "source": "building:test", "property": "test-1-user-state", "value": "present" },
                  { "source": "building:test", "property": "all-users-away", "value": false },
                  { "source": "building:test", "property": "users-state", "value": "occupied-awake" },
                  { "source": "building:test", "property": "test-2-user-state", "value": "present" },
                  { "source": "building:test", "property": "test-3-user-state", "value": "present" },
                  { "source": "building:test", "property": "alarm-state", "value": "stay-armed" },
                  { "source": "building:test", "property": "alarm-state", "value": "stay-armed-house-occupied" },
                  { "source": "building:test", "property": "alarm-state", "value": "fire-alarm" },
                  { "source": "building:test", "property": "alarm-state", "value": "stay-armed" },
                  { "source": "building:test", "property": "alarm-state", "value": "stay-armed-house-occupied" },
                  { "source": "building:test", "property": "alarm-state", "value": "zone-alarm" },
                  { "source": "building:test", "property": "alarm-state", "value": "fire-alarm" },
                  { "source": "building:test", "property": "alarm-state", "value": "stay-armed" },
                  { "source": "building:test", "property": "alarm-state", "value": "not-armed" },
                  { "source": "building:test", "property": "test-1-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "test-2-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "test-3-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "all-users-away", "value": true }
               ]
            },
            {
               "name": "2) Normal - Arm the alarm for stay and have people present, they then leave, movement detected so dogs at home",
               "driveSequence": [
                  { "wait": 3, "property": "test-1-present", "value": true },
                  { "wait": 0.5, "property": "test-2-present", "value": true },
                  { "wait": 0.5, "property": "test-3-present", "value": true },
                  { "wait": 0.5, "property": "stay-armed", "value": true },
                  { "wait": 0.5, "property": "test-1-present", "value": false },
                  { "wait": 0.5, "property": "test-2-present", "value": false },
                  { "wait": 0.5, "property": "test-3-present", "value": false },
                  { "wait": 2, "target": "bedroom:test-1", "property": "movement", "value": true },
                  { "wait": 1.5, "target": "bedroom:test-1", "property": "movement", "value": false },
                  { "wait": 0.5, "property": "zone-alarm", "value": "true" },
                  { "wait": 1.5, "property": "zone-alarm", "value": "false" },
                  { "wait": 1.5, "property": "stay-armed", "value": "false" }
               ],
               "expectedSequence": [
                  { "source": "building:test", "property": "users-state", "value": "empty" },
                  { "source": "building:test", "property": "test-1-user-state", "value": "present" },
                  { "source": "building:test", "property": "all-users-away", "value": false },
                  { "source": "building:test", "property": "users-state", "value": "occupied-awake" },
                  { "source": "building:test", "property": "test-2-user-state", "value": "present" },
                  { "source": "building:test", "property": "test-3-user-state", "value": "present" },
                  { "source": "building:test", "property": "alarm-state", "value": "stay-armed" },
                  { "source": "building:test", "property": "test-1-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "test-2-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "test-3-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "all-users-away", "value": true },
                  { "source": "building:test", "property": "users-state", "value": "empty" },
                  { "source": "building:test", "property": "alarm-state", "value": "stay-armed-house-empty" },
                  { "source": "building:test", "property": "movement", "value": true },
                  { "source": "building:test", "property": "alarm-state", "value": "stay-armed-animals-present" },
                  { "source": "building:test", "property": "movement", "value": false },
                  { "source": "building:test", "property": "alarm-state", "value": "zone-alarm" },
                  { "source": "building:test", "property": "alarm-state", "value": "stay-armed-house-empty" },
                  { "source": "building:test", "property": "alarm-state", "value": "not-armed" }
               ]
            },
            {
               "name": "3) Normal - both going to bed slightly different times - initiation by bed switches",
               "driveSequence": [
                  { "wait": 3, "property": "test-1-present", "value": true },
                  { "wait": 0.5, "property": "test-2-present", "value": true },
                  { "wait": 0.5, "property": "test-3-present", "value": true },
                  { "wait": 0.5, "target": "bedroom:test-2", "event": "test-3-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-2", "event": "test-3-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "test-1-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "test-2-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "test-1-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "test-2-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "wake-up-event" },
                  { "wait": 0.5, "target": "bedroom:test-2", "event": "wake-up-event" },
                  { "wait": 1.5, "property": "test-1-present", "value": false },
                  { "wait": 0.5, "property": "test-2-present", "value": false },
                  { "wait": 0.5, "property": "test-3-present", "value": false }
               ],
               "expectedSequence": [
                  { "source": "building:test", "property": "test-1-user-state", "value": "present" },
                  { "source": "building:test", "property": "all-users-away", "value": false },
                  { "source": "building:test", "property": "users-state", "value": "occupied-awake" },
                  { "source": "building:test", "property": "test-2-user-state", "value": "present" },
                  { "source": "building:test", "property": "test-3-user-state", "value": "present" },
                  { "source": "building:test", "property": "test-3-user-state", "value": "in-bed" },
                  { "source": "building:test", "property": "some-users-in-bed", "value": true },
                  { "source": "building:test", "property": "users-state", "value": "occupied-going-to-bed" },
                  { "source": "building:test", "property": "test-1-user-state", "value": "in-bed" },
                  { "source": "building:test", "property": "test-2-user-state", "value": "in-bed" },
                  { "source": "building:test", "property": "all-users-in-bed", "value": true },
                  { "source": "building:test", "property": "users-state", "value": "occupied-asleep" },
                  { "source": "building:test", "property": "night-time", "value": true },
                  { "source": "building:test", "property": "test-1-user-state", "value": "present" },
                  { "source": "building:test", "property": "all-users-in-bed", "value": false },
                  { "source": "building:test", "property": "users-state", "value": "occupied-waking-up" },
                  { "source": "building:test", "property": "night-time", "value": false },
                  { "source": "building:test", "property": "test-2-user-state", "value": "present" },
                  { "source": "building:test", "property": "test-3-user-state", "value": "present" },
                  { "source": "building:test", "property": "some-users-in-bed", "value": false },
                  { "source": "building:test", "property": "users-state", "value": "occupied-awake" },
                  { "source": "building:test", "property": "test-1-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "test-2-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "test-3-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "all-users-away", "value": true }
               ]
            },
            {
               "name": "4) Normal - both going to bed slightly different times - initiation by bed switches",
               "driveSequence": [
                  { "wait": 5, "property": "test-1-present", "value": true },
                  { "wait": 0.5, "property": "test-3-present", "value": true },
                  { "wait": 0.5, "target": "bedroom:test-2", "event": "test-3-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-2", "event": "test-3-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "test-1-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "test-1-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "wake-up-event" },
                  { "wait": 0.5, "target": "bedroom:test-2", "event": "wake-up-event" },
                  { "wait": 1.5, "property": "test-1-present", "value": false },
                  { "wait": 0.5, "property": "test-2-present", "value": false },
                  { "wait": 0.5, "property": "test-3-present", "value": false }
               ],
               "expectedSequence": [
                  { "source": "building:test", "property": "users-state", "value": "empty" },
                  { "source": "building:test", "property": "test-1-user-state", "value": "present" },
                  { "source": "building:test", "property": "all-users-away", "value": false },
                  { "source": "building:test", "property": "users-state", "value": "occupied-awake" },
                  { "source": "building:test", "property": "test-3-user-state", "value": "present" },
                  { "source": "building:test", "property": "test-3-user-state", "value": "in-bed" },
                  { "source": "building:test", "property": "some-users-in-bed", "value": true },
                  { "source": "building:test", "property": "users-state", "value": "occupied-going-to-bed" },
                  { "source": "building:test", "property": "test-1-user-state", "value": "in-bed" },
                  { "source": "building:test", "property": "all-users-in-bed", "value": true },
                  { "source": "building:test", "property": "users-state", "value": "occupied-asleep" },
                  { "source": "building:test", "property": "night-time", "value": true },
                  { "source": "building:test", "property": "test-1-user-state", "value": "present" },
                  { "source": "building:test", "property": "all-users-in-bed", "value": false },
                  { "source": "building:test", "property": "users-state", "value": "occupied-waking-up" },
                  { "source": "building:test", "property": "night-time", "value": false },
                  { "source": "building:test", "property": "test-3-user-state", "value": "present" },
                  { "source": "building:test", "property": "some-users-in-bed", "value": false },
                  { "source": "building:test", "property": "users-state", "value": "occupied-awake" },
                  { "source": "building:test", "property": "test-1-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "test-3-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "all-users-away", "value": true }
               ]
            },
            {  
               "name": "5) Normal - both going to bed slightly different times - initiation by bed switches",
               "driveSequence": [
                  { "wait": 5, "property": "test-1-present", "value": true },
                  { "wait": 0.5, "property": "test-2-present", "value": true },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "test-1-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "test-2-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "test-1-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "test-2-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "wake-up-event" },
                  { "wait": 1.5, "property": "test-1-present", "value": false },
                  { "wait": 0.5, "property": "test-2-present", "value": false }
               ],
               "expectedSequence": [
                  { "source": "building:test", "property": "users-state", "value": "empty" },
                  { "source": "building:test", "property": "test-1-user-state", "value": "present" },
                  { "source": "building:test", "property": "all-users-away", "value": false },
                  { "source": "building:test", "property": "users-state", "value": "occupied-awake" },
                  { "source": "building:test", "property": "test-2-user-state", "value": "present" },
                  { "source": "building:test", "property": "test-1-user-state", "value": "in-bed" },
                  { "source": "building:test", "property": "some-users-in-bed", "value": true },
                  { "source": "building:test", "property": "users-state", "value": "occupied-going-to-bed" },
                  { "source": "building:test", "property": "test-2-user-state", "value": "in-bed" },
                  { "source": "building:test", "property": "all-users-in-bed", "value": true },
                  { "source": "building:test", "property": "users-state", "value": "occupied-asleep" },
                  { "source": "building:test", "property": "night-time", "value": true },
                  { "source": "building:test", "property": "test-1-user-state", "value": "present" },
                  { "source": "building:test", "property": "all-users-in-bed", "value": false },
                  { "source": "building:test", "property": "users-state", "value": "occupied-waking-up" },
                  { "source": "building:test", "property": "night-time", "value": false },
                  { "source": "building:test", "property": "test-2-user-state", "value": "present" },
                  { "source": "building:test", "property": "some-users-in-bed", "value": false },
                  { "source": "building:test", "property": "users-state", "value": "occupied-awake" }, 
                  { "source": "building:test", "property": "test-1-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "test-2-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "all-users-away", "value": true }
               ]
            },
            {
               "name": "6) Normal - 2nd user in one bedroom forgets to touch switch",
               "driveSequence": [
                  { "wait": 5, "property": "test-1-present", "value": true },
                  { "wait": 0.5, "property": "test-2-present", "value": true },
                  { "wait": 0.5, "property": "test-3-present", "value": true },
                  { "wait": 0.5, "target": "bedroom:test-2", "event": "test-3-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-2", "event": "test-3-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "test-1-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "test-1-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "test-2-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "test-2-switch-event" },
                  { "wait": 0.5, "target": "bedroom:test-1", "event": "wake-up-event" },
                  { "wait": 0.5, "target": "bedroom:test-2", "event": "wake-up-event" },
                  { "wait": 1.5, "property": "test-1-present", "value": false },
                  { "wait": 0.5, "property": "test-2-present", "value": false },
                  { "wait": 0.5, "property": "test-3-present", "value": false }
               ],
               "expectedSequence": [
                  { "source": "building:test", "property": "users-state", "value": "empty" },
                  { "source": "building:test", "property": "test-1-user-state", "value": "present" },
                  { "source": "building:test", "property": "all-users-away", "value": false },
                  { "source": "building:test", "property": "users-state", "value": "occupied-awake" },
                  { "source": "building:test", "property": "test-2-user-state", "value": "present" },
                  { "source": "building:test", "property": "test-3-user-state", "value": "present" },
                  { "source": "building:test", "property": "test-3-user-state", "value": "in-bed" },
                  { "source": "building:test", "property": "some-users-in-bed", "value": true },
                  { "source": "building:test", "property": "users-state", "value": "occupied-going-to-bed" },
                  { "source": "building:test", "property": "test-1-user-state", "value": "in-bed" },
                  { "source": "building:test", "property": "test-2-user-state", "value": "in-bed" },
                  { "source": "building:test", "property": "all-users-in-bed", "value": true },
                  { "source": "building:test", "property": "users-state", "value": "occupied-asleep" },
                  { "source": "building:test", "property": "night-time", "value": true },
                  { "source": "building:test", "property": "test-1-user-state", "value": "present" },
                  { "source": "building:test", "property": "all-users-in-bed", "value": false },
                  { "source": "building:test", "property": "users-state", "value": "occupied-waking-up" },
                  { "source": "building:test", "property": "night-time", "value": false },
                  { "source": "building:test", "property": "test-2-user-state", "value": "present" },
                  { "source": "building:test", "property": "test-3-user-state", "value": "present" },
                  { "source": "building:test", "property": "some-users-in-bed", "value": false },
                  { "source": "building:test", "property": "users-state", "value": "occupied-awake" },
                  { "source": "building:test", "property": "test-1-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "test-2-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "test-3-user-state", "value": "not-present" },
                  { "source": "building:test", "property": "all-users-away", "value": true }
               ]
            }
         ],
         "props": [],
         "things": [
            {
               "uName": "building:test",
               "displayName": "Test Building",
               "users": [ { "uName": "user:test-1" }, { "uName": "user:test-2" }, { "uName": "user:test-3" } ],
               "bedrooms": [ { "uName": "bedroom:test-1" }, { "uName": "bedroom:test-2" } ],
               "rooms": [ { "uName": "room:test-1" }, { "uName": "room:test-2" } ],
               "allUsersLeftTimeout": 2,
               "propogateToParent": false,
               "things": []
            }
         ]
      },
      {
         "uName": "bedroom:test-1",
         "displayName": "Test Bedroom 1",
         "users": [ { "uName": "user:test-1" }, { "uName": "user:test-2" } ],
         "readingInBedTimeout": 4,
         "awakeInBedTimeout": 1,
         "movementTimeout": 2,
         "propogateToParent": false,
         "events": [],
         "props": [
            {
               "name": "movement",
               "initialValue": false
            },
            {
               "name": "low-light",
               "initialValue": false
            }
         ],
         "things": [
         ]
      },
      {
         "uName": "bedroom:test-2",
         "displayName": "Test Bedroom 2",
         "users": [ { "uName": "user:test-3" } ],
         "readingInBedTimeout": 4,
         "awakeInBedTimeout": 1,
         "movementTimeout": 2,
         "propogateToParent": false,
         "events": [],
         "props": [
            {
               "name": "movement",
               "initialValue": false
            },
            {
               "name": "low-light",
               "initialValue": false
            }
         ],
         "things": [
         ]
      },
      {
         "uName": "room:test-1",
         "displayName": "Test Room 1",
         "movementTimeout": 2,
         "propogateToParent": false,
         "events": [],
         "props": [
            {
               "name": "movement",
               "initialValue": false
            },
            {
               "name": "low-light",
               "initialValue": false
            }
         ],
         "things": [
         ]
      },
      {
         "uName": "room:test-2",
         "displayName": "Test Room 2",
         "movementTimeout": 2,
         "propogateToParent": false,
         "events": [],
         "props": [
            {
               "name": "movement",
               "initialValue": false
            },
            {
               "name": "low-light",
               "initialValue": false
            }
         ],
         "things": [
         ]
      }
   ]
}

{
   "casa": {
      "uName": "casa:test-room",
      "displayName": "Casa Collin Test Room",
      "gang": "gang:collin-test",
      "listeningPort": 8085
   },
   "services": [],
   "scenes": [],
   "things": [
      {
         "uName": "tester:room",
         "displayName": "Test thing:room",
         "targetUnderTest": "room:test-room",
         "sources": [
            { "property": "room-state" },
            { "property": "user-override-state" },
            { "uName": "thing:test-main-lights", "property": "power" },
            { "property": "evening-possible" }
         ],
         "testRun": {
            "testCases": []
         },
         "testSteps": [
         ],
         "testCases": [
            {
               "name": "1) Normal - initiation by bed switch - override sensors",
               "driveSequence": [
                  { "event": "room-switch-event" },
                  { "wait": 1, "event": "room-switch-event" }
               ],
               "expectedSequence": [
                  { "property": "user-override-state", "value": "active" },
                  { "property": "user-override-state", "value": "not-active" }
               ]
            },
            {
               "name": "2) Normal - initiation by movement and timeout",
               "driveSequence": [
                  { "property": "low-light", "value": true },
                  { "wait": 0.5, "property": "movement", "value": true },
                  { "wait": 2.0, "property": "movement", "value": false },
                  { "wait": 1.5, "property": "low-light", "value": false }
               ],
               "expectedSequence": [
                  { "property": "room-state", "value": "no-users-present-dull-day" },
                  {
                     "simultaneous": [
                        { "property": "room-state", "value": "users-present-dull-day" },
                        { "source": "thing:test-main-lights", "property": "power", "value": true }
                     ]
                  },
                  {
                     "simultaneous": [
                        { "property": "room-state", "value": "no-users-present-dull-day" },
                        { "source": "thing:test-main-lights", "property": "power", "value": false }
                     ]
                  },
                  { "property": "room-state", "value": "no-users-present-day" }
               ],
               "cleanupSequence": [
               ]
            },
            {
               "name": "3) Normal - check state model for room-state",
               "driveSequence": [
                  //{ "testCase": "2) Normal - initiation by movement and timeout" },
                  { "property": "low-light", "value": true },
                  { "wait": 0.5, "property": "movement", "value": true },
                  { "wait": 2.0, "property": "movement", "value": false },
                  { "wait": 1.5, "property": "low-light", "value": false },

                  { "wait": 1, "property": "evening-possible", "value": true },
                  { "wait": 1, "property": "low-light", "value": true },
                  { "wait": 0.5, "property": "movement", "value": true },
                  { "wait": 2.0, "property": "movement", "value": false },
                  { "wait": 3.0, "property": "night-time", "value": true },
                  { "wait": 0.5, "property": "evening-possible", "value": false },
                  { "wait": 0.5, "property": "movement", "value": true },
                  { "wait": 0.5, "property": "movement", "value": false },
                  { "wait": 0.5, "property": "night-time", "value": false },
                  { "wait": 5, "property": "low-light", "value": false }
               ],
               "expectedSequence": [
                  //{ "testCase": "2) Normal - initiation by movement and timeout" },
                  { "property": "room-state", "value": "no-users-present-dull-day" },
                  {
                     "simultaneous": [
                        { "property": "room-state", "value": "users-present-dull-day" },
                        { "source": "thing:test-main-lights", "property": "power", "value": true }
                     ]
                  },
                  {
                     "simultaneous": [
                        { "property": "room-state", "value": "no-users-present-dull-day" },
                        { "source": "thing:test-main-lights", "property": "power", "value": false }
                     ]
                  },
                  { "property": "room-state", "value": "no-users-present-day" },

                  { "property": "evening-possible", "value": true },
                  { "property": "room-state", "value": "no-users-present-evening" },
                  {
                     "simultaneous": [
                        { "property": "room-state", "value": "users-present-evening" },
                        { "source": "thing:test-main-lights", "property": "power", "value": true }
                     ]
                  },
                  {
                     "simultaneous": [
                        { "property": "room-state", "value": "no-users-present-evening" },
                        { "source": "thing:test-main-lights", "property": "power", "value": false }
                     ]
                  },
                  {
                     "simultaneous": [
                        { "property": "room-state", "value": "no-users-present-night" },
                        { "property": "evening-possible", "value": false }
                     ]
                  },
                  {
                     "simultaneous": [
                        { "property": "room-state", "value": "users-present-night" },
                        { "property": "room-state", "value": "users-present-dull-day" },
                        { "source": "thing:test-main-lights", "property": "power", "value": true }
                     ]
                  },
                  {
                     "simultaneous": [
                        { "property": "room-state", "value": "no-users-present-dull-day" },
                        { "source": "thing:test-main-lights", "property": "power", "value": false }
                     ]
                  },
                  { "property": "room-state", "value": "no-users-present-day" }
               ],
               "cleanupSequence": [
               ]
            }
         ],
         "props": [],
         "things": []
      },
      {
         "uName": "room:test-room",
         "displayName": "Test Room",
         "movementTimeout": 3,
         "events": [],
         "props": [
            {
               "name": "movement",
               "initialValue": false
            },
            {
               "name": "low-light",
               "initialValue": false
            },
            {
               "name": "night-time",
               "initialValue": false
            }
         ],
         "things": [
            {
               "uName": "thing:test-main-lights",
               "displayName": "Test Main Lights",
               "propogateToParent": false,
               "props": [
                  {
                     "name": "room-state",
                     "type": "stateproperty",
                     "states": [
                        {
                           "name": "no-users-present-day",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-day",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "no-users-present-evening",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-evening",
                           "priority": 4,
                           "actions": [{ "property": "brightness", "value": 20 }, { "property": "power", "value": true }]
                        },
                        {
                           "name": "no-users-present-night",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-night",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "no-users-present-dull-day",
                           "actions": [{ "property": "power", "value": false }]
                        },
                        {
                           "name": "users-present-dull-day",
                           "priority": 4,
                           "actions": [{ "property": "brightness", "value": 20 }, { "property": "power", "value": true }]
                        }
                     ]
                  },
                  {
                     "name": "power",
                     "initialValue": false
                  },
                  {
                     "name": "brightness",
                     "initialValue": 0
                  }
               ]
            }
         ]
      }
   ]
}

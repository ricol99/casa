{
   "casa": {
      "uName": "casa:test-room",
      "displayName": "Casa Collin Test Room",
      "gang": "gang:collin-test",
      "listeningPort": 8085
   },
   "services": [],
   "scenes": [],
   "things": [
      {
         "uName": "tester:room",
         "displayName": "Test thing:room",
         "sources": [
            { "uName": "room:test-room", "property": "room-state" },
            { "uName": "room:test-room", "property": "user-override-state" },
            { "uName": "thing:test-main-lights", "property": "power" },
            { "uName": "building:test", "property": "evening-possible" }
         ],
         "testCases": [
            {
               "name": "1) Normal - initiation by bed switch - override sensors",
               "driveSequence": [
                  { "wait": 5, "event": "room-switch-event" },
                  { "wait": 1, "event": "room-switch-event" }
               ],
               "expectedSequence": [
                  { "source": "room:test-room", "property": "user-override-state", "value": "active" },
                  { "source": "room:test-room", "property": "user-override-state", "value": "not-active" }
               ]
            },
            {
               "name": "2) Normal - initiation by movement and timeout",
               "driveSequence": [
                  { "wait": 1, "property": "low-light", "value": true },
                  { "wait": 0.5, "property": "movement", "value": true },
                  { "wait": 2.0, "property": "movement", "value": false },
                  { "wait": 1, "property": "low-light", "value": false }
               ],
               "expectedSequence": [
                  { "source": "room:test-room", "property": "room-state", "value": "no-users-present-dull-day" },
                  { "source": "room:test-room", "property": "room-state", "value": "users-present-dull-day" },
                  { "source": "thing:test-main-lights", "property": "power", "value": true },
                  { "source": "room:test-room", "property": "room-state", "value": "no-users-present-dull-day", "fuzz": 1 },
                  { "source": "thing:test-main-lights", "property": "power", "value": false, "fuzz": 1 },
                  { "source": "room:test-room", "property": "room-state", "value": "no-users-present-day" }
               ],
               "cleanupSequence": [
               ]
            },
            {
               "name": "3) Normal - check state model for room-state",
               "driveSequence": [
                  { "wait": 1, "property": "low-light", "value": true },
                  { "wait": 0.5, "property": "movement", "value": true },
                  { "wait": 2.0, "property": "movement", "value": false },
                  { "wait": 2, "property": "low-light", "value": false },
                  { "wait": 1, "target": "building:test", "property": "evening-possible", "value": true },
                  { "wait": 1, "property": "low-light", "value": true },
                  { "wait": 0.5, "property": "movement", "value": true },
                  { "wait": 2.0, "property": "movement", "value": false },
                  { "wait": 1.0, "target": "building:test","property": "night-time", "value": true },
                  { "wait": 0.5, "property": "movement", "value": true },
                  { "wait": 2.0, "property": "movement", "value": false },
                  { "wait": 1.0, "target": "building:test","property": "night-time", "value": false },
                  { "wait": 1, "property": "low-light", "value": false }
               ],
               "expectedSequence": [
                  { "source": "room:test-room", "property": "room-state", "value": "no-users-present-dull-day" },
                  { "source": "room:test-room", "property": "room-state", "value": "users-present-dull-day" },
                  { "source": "thing:test-main-lights", "property": "power", "value": true },
                  { "source": "room:test-room", "property": "room-state", "value": "no-users-present-dull-day" },
                  { "source": "thing:test-main-lights", "property": "power", "value": false },
                  { "source": "room:test-room", "property": "room-state", "value": "no-users-present-day" },
                  { "source": "building:test", "property": "evening-possible", "value": true },
                  { "source": "room:test-room", "property": "room-state", "value": "no-users-present-evening" },
                  { "source": "room:test-room", "property": "room-state", "value": "users-present-evening" },
                  { "source": "thing:test-main-lights", "property": "power", "value": true },
                  { "source": "room:test-room", "property": "room-state", "value": "no-users-present-evening" },
                  { "source": "thing:test-main-lights", "property": "power", "value": false, "fuzz": 1 },
                  { "source": "building:test", "property": "evening-possible", "value": false },
                  { "source": "room:test-room", "property": "room-state", "value": "no-users-present-night" },
                  { "source": "room:test-room", "property": "room-state", "value": "users-present-night" },
                  { "source": "room:test-room", "property": "room-state", "value": "no-users-present-night" },
                  { "source": "room:test-room", "property": "room-state", "value": "no-users-present-dull-day" },
                  { "source": "room:test-room", "property": "room-state", "value": "no-users-present-day" }
               ],
               "cleanupSequence": [
               ]
            }
         ],
         "props": [],
         "things": [
            {
               "uName": "building:test",
               "displayName": "Test Building",
               "users": [],
               "bedrooms": [],
               "rooms": [
                  { "uName": "room:test-room" }
               ]
            },
            {
               "uName": "room:test-room",
               "displayName": "Test Room",
               "movementTimeout": 3,
               "buildingName": "building:test",
               "events": [],
               "props": [
                  {
                     "name": "movement",
                     "initialValue": false
                  },
                  {
                     "name": "low-light",
                     "initialValue": false
                  }
               ],
               "things": [
                  {
                     "uName": "thing:test-main-lights",
                     "displayName": "Test Main Lights",
                     "propogateToParent": false,
                     "props": [
                        {
                           "name": "room-state",
                           "type": "stateproperty",
                           "states": [
                              {
                                 "name": "no-users-present-day",
                                 "targets": [{ "property": "power", "value": false }]
                              },
                              {
                                 "name": "users-present-day",
                                 "targets": [{ "property": "power", "value": false }]
                              },
                              {
                                 "name": "no-users-present-evening",
                                 "targets": [{ "property": "power", "value": false }]
                              },
                              {
                                 "name": "users-present-evening",
                                 "priority": 4,
                                 "targets": [{ "property": "brightness", "value": 20 }, { "property": "power", "value": true }]
                              },
                              {
                                 "name": "no-users-present-night",
                                 "targets": [{ "property": "power", "value": false }]
                              },
                              {
                                 "name": "users-present-night",
                                 "targets": [{ "property": "power", "value": false }]
                              },
                              {
                                 "name": "no-users-present-dull-day",
                                 "targets": [{ "property": "power", "value": false }]
                              },
                              {
                                 "name": "users-present-dull-day",
                                 "priority": 4,
                                 "targets": [{ "property": "brightness", "value": 20 }, { "property": "power", "value": true }]
                              }
                           ]
                        },
                        {
                           "name": "power",
                           "initialValue": false
                        },
                        {
                           "name": "brightness",
                           "initialValue": 0
                        }
                     ]
                  }
               ]
            }
         ]
      }
   ]
}
